<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../genindex/" /><link rel="search" title="Search" href="../../../search/" />

    <link rel="shortcut icon" href="../../../_static/favicon.ico"/><meta name="generator" content="sphinx-3.5.4, furo 2021.04.11.beta34"/>
        <title>User events | Alan Docs</title>
      <link rel="stylesheet" href="../../../_static/styles/furo.css?digest=59ab60ac09ea94ccfe6deddff6d715cce948a6fc">
    <link rel="stylesheet" href="../../../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../../_static/pygments_dark.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    


<style>
  :root {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/algolia.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/typesense-docsearch.js@latest/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" href="../../../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b">
    <link rel="shortcut icon" type="image/x-icon" href="../../../_static/favicon.ico">
	<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
	<link rel="canonical" href="https://alan.app/docs/server-api/user-data/events/"/>
    <script type="text/javascript" src= "https://studio.alan.app/web/lib/alan_lib.min.js"></script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-QTCQV2T397"></script>
        <script>
        	window.dataLayer = window.dataLayer || [];
        	function gtag(){dataLayer.push(arguments);}
        	gtag('js', new Date());
		
        	gtag('config', window.location.hostname === "alan.app" ? 'G-QTCQV2T397' : 'G-H4F9QS7RMX');
	</script>
</head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="-5 -3 24 24"
      stroke="currentColor"
      class="feather feather-chevron-right">
      <path d="M11 9l-6 5.25V3.75z"></path>
    </svg>
  </symbol>
</svg>


    <link rel="shortcut icon" type="image/x-icon" href="../../../_static/favicon.ico">
	<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
	<link rel="canonical" href="https://alan.app/docs/server-api/user-data/events/"/>
    <script type="text/javascript" src= "https://studio.alan.app/web/lib/alan_lib.min.js"></script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-QTCQV2T397"></script>
        <script>
        	window.dataLayer = window.dataLayer || [];
        	function gtag(){dataLayer.push(arguments);}
        	gtag('js', new Date());
		
        	gtag('config', window.location.hostname === "alan.app" ? 'G-QTCQV2T397' : 'G-H4F9QS7RMX');
	</script>



<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>


<div class="header-new">
<div class="header-content">
		<div class="logo-part">
			<div class="logo"> 
			
             <div class="sidebar-logo-container">
				<a href="https://alan.app"><img class="sidebar-logo" src="../../../_static/alan-logo.svg" alt="Logo"/></a>
				<div class="docs">
					
					<a href="../../../"> 
					
					</div>
				</div>
			
			</div>
			
			
			</a>
		</div>
        
		
		<div class="right-block">
		
		<!--<div class="dropdown" id="version">
		  <button class="dropbtn">4.2</button><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i>
		  <div id="myDropdown" class="dropdown-content">
			<a href="javascript:void(0);" class="drop-link">4.2</a>
			<a href="javascript:void(0);" class="drop-link">4.1</a>
			<a href="javascript:void(0);" class="drop-link">3.x</a>
		  </div>
		</div>
		
		<div class="dropdown" id="platform">
		  <button class="dropbtn">Framework/language</button><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i>
		  <div id="myDropdown" class="dropdown-content">
			<a href="javascript:void(0);" class="drop-link">Web (React, Angular, etc.)</a>
			<a href="javascript:void(0);" class="drop-link">Objective-C</a>
			<a href="javascript:void(0);" class="drop-link">Swift</a>
			<a href="javascript:void(0);" class="drop-link">Kotlin</a>
			<a href="javascript:void(0);" class="drop-link">Java</a>
			<a href="javascript:void(0);" class="drop-link">Flutter</a>
			<a href="javascript:void(0);" class="drop-link">Ionic</a>
			<a href="javascript:void(0);" class="drop-link">React Native</a>
		  </div>
		</div>-->
		
		<!-- First Dropdown -->
		<div class="dropdown" id="version">
			<button class="dropbtn">Version</button>
			<div class="dropdown-content">
				<a href="javascript:void(0);">4.2</a>
				<a href="javascript:void(0);">4.1</a>
				<a href="javascript:void(0);">3.x</a>
			</div>
		</div>

		<!-- Second Dropdown -->
		<div class="dropdown" id="platform">
			<button class="dropbtn">Framework/language</button>
			<div class="dropdown-content">
				<a href="javascript:void(0);">Web (React, Angular, etc.)</a>
				<a href="javascript:void(0);">Objective-C</a>
				<a href="javascript:void(0);">Swift</a>
				<a href="javascript:void(0);">Kotlin</a>
				<a href="javascript:void(0);">Java</a>
				<a href="javascript:void(0);">Flutter</a>
				<a href="javascript:void(0);">Ionic</a>
				<a href="javascript:void(0);">React Native</a>

			</div>
		</div>
		
		
		<div class="goto"><a class="docs-tooltip-link" target="_blank"></a>
		<span class="docs-tooltip">Go to docs</span>
		</div>
		
		<div class="search-box">   
			<form class="sidebar-search-container" >
				<input class="sidebar-search" placeholder=Search name="q" ={sendRequestDebounce}>
				<input type="hidden" name="check_keywords" value="yes">
				<input type="hidden" name="area" value="default">
			</form>
			
			
		</div>
		<div class="social">
			<a href="https://alanaigroup.slack.com/join/shared_invite/enQtNzMzOTE5MTIwMjg4LWI4ZmM4MTNkMTdmY2M0ZWEwODlmZDQ5Y2ZkMjUzNmMyZDJiMzA0Y2M1NDdhYzZjYWFlZTA5NjM4OTU0MWFmNWU#/shared-invite/email" target="_blank" class="fa-brands fa-slack fa-lg"></a>
			<a href="https://github.com/alan-ai" target="_blank" class="fa-brands fa-github fa-lg"></a>
        </div>
		</div>
		</div>
    </div>

	  
		
		
	
	</div>
<div class="page">
  
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <div class="logo-part">
			<div class="logo"> 
			
             <div class="sidebar-logo-container">
				<a href="https://alan.app"><img class="sidebar-logo" src="../../../_static/alan-logo.svg" alt="Logo"/></a>
			</div>
			
			</div>
			
			<div class="docs">
			
			<a href="../../../"> 
			
			</div>
			</a>
		</div>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../../contents/">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../../_static/alan-logo.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container">
  <input class="sidebar-search search-mobile" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../">Get started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../usage/how-works/about/">How Alan AI works</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/how-works/basics/">Alan AI basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/how-works/infrastructure/">Alan AI infrastructure</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/how-works/deployment/">Deployment options</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/how-works/cloud-deployment/">Cloud deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/how-works/hybrid-deployment/">Hybrid deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/how-works/on-premises-deployment/">On-premises deployment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/how-works/voice-processing/">Voice processing</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../usage/guides/studio/">Alan AI Studio</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/guides/projects/">Alan AI projects</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/guides/scripts/">Dialog scripts</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/managing-scripts/">Managing scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/importing-scripts/">Exporting and importing scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/sharing-github/">Sharing and keeping scripts in GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/using-shortcuts/">Using shortcuts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/changing-theme/">Changing the theme and font size</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/viewing-flowchart/">Viewing the script flowchart</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/guides/versioning/">Versions and environments</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/guides/script-testing/">Testing and debugging</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/debugging-chat/">Debugging Chat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/studio-test-tools/">Tools to simulate in-app behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/test-view/">Test View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/logs/">Alan AI Studio logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/in-app-testing/">In-app testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/guides/playground/">Alan AI Playground</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/guides/analytics/">Conversational analytics</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/dashboard/">Projects dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/analytics-view/">Analytics View</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/guides/billing/">Billing and subscriptions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../usage/button/overview/">Alan AI assistant</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/button/customization/">Customizing the AI assistant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/button/chat/">Enabling the Alan AI Chat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/button/cohorts/">Setting up cohorts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/button/activation/">Starting and stopping dialog sessions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/additional/supported-platforms/">Supported platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/additional/library/">Alan AI resource library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/updates/">Recent Alan AI Platform updates</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="user-events">
<h1>User events<a class="headerlink" href="#user-events" title="Permalink to this headline">¶</a></h1>
<p>Alan AI emits several types of events driven by users’ interactions with the AI assistant. You can listen to these events with the <a class="reference internal" href="../../api/api-reference/#onuserevent"><span class="std std-ref">onUserEvent</span></a> callback and perform the activities needed for your assistant logic.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The user statistics is updated after the user dialog session is closed.</p>
</div>
<div class="section" id="types-of-events">
<h2>Types of events<a class="headerlink" href="#types-of-events" title="Permalink to this headline">¶</a></h2>
<p>You can use the following events in your dialog script:</p>
<div class="tabbed-set docutils">
<input checked="checked" id="2714533d-87b9-4dcb-a9bf-98b45210c248" name="c98aede4-35b7-4b93-ac1c-26cae3e8476d" type="radio"/>
<label class="tabbed-label" for="2714533d-87b9-4dcb-a9bf-98b45210c248">
Web</label><div class="tabbed-content docutils">
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 33%"/>
<col style="width: 67%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Event name</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="#button-clicked-web">buttonClicked</a></p></td>
<td><p>Fired when the user clicks the AI assistant button in the app</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="#button-ready-web">buttonReady</a></p></td>
<td><p>Fired when Alan AI connects to the virtual assistant project and is ready to listen to the user’s input</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="#first-activate-web">firstActivate</a></p></td>
<td><p>Fired when the user activates the AI assistant for the first time during the dialog session</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="#first-click-web">firstClick</a></p></td>
<td><p>Fired when the user clicks the AI assistant button for the first time during the dialog session</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="#mic-allowed-web">micAllowed</a></p></td>
<td><p>Fired when the user allows access to the microphone</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="#mic-prompt-web">micPermissionPrompt</a></p></td>
<td><p>Fired when a prompt to allow access to the microphone is displayed</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="#popup-close-web">popupCloseClicked</a></p></td>
<td><p>Fired when the user clicks the close icon in the <a class="reference internal" href="../../popups/"><span class="doc">Alan AI button popup</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="#recognized-web">recognized</a></p></td>
<td><p>Fired during and upon the user’s input recognition</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="#show-popup-web">showPopup</a></p></td>
<td><p>Fired when a <a class="reference internal" href="../../popups/"><span class="doc">popup</span></a>  next to the AI assistant button is displayed</p></td>
</tr>
</tbody>
</table></div>
<p>In the example below, the AI assistant listens to the <code class="docutils literal notranslate"><span class="pre">firstActivate</span></code> event and, if the last interaction with the user occurred earlier than one day ago, plays a greeting to the user.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">diffFrom</span><span class="p">(</span><span class="nx">ts</span><span class="p">,</span> <span class="nx">units</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">last = </span><span class="nx">DateTime</span><span class="p">.</span><span class="nx">fromMillis</span><span class="p">(</span><span class="nx">ts</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nv">now  = </span><span class="nx">DateTime</span><span class="p">.</span><span class="nx">local</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`now.diff(last): </span><span class="si">${</span><span class="nx">now</span><span class="p">.</span><span class="nx">diff</span><span class="p">(</span><span class="nx">last</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`units: </span><span class="si">${</span><span class="nx">units</span><span class="si">}</span><span class="sb">, now.diff(last).as(units): </span><span class="si">${</span><span class="nx">now</span><span class="p">.</span><span class="nx">diff</span><span class="p">(</span><span class="nx">last</span><span class="p">).</span><span class="kr">as</span><span class="p">(</span><span class="nx">units</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">now</span><span class="p">.</span><span class="nx">diff</span><span class="p">(</span><span class="nx">last</span><span class="p">).</span><span class="kr">as</span><span class="p">(</span><span class="nx">units</span><span class="p">);</span>
<span class="p">}</span>

<span class="kp">onUserEvent</span><span class="p">((</span><span class="nx">p</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">'event'</span><span class="p">,</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">event</span> <span class="o">==</span> <span class="s1">'firstActivate'</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">diffFrom</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">userInfo</span><span class="p">.</span><span class="nx">lastInteractionTs</span><span class="p">,</span> <span class="s1">'days'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'(Hi|Hi there|Hello), I am Alan, your AI assistant. Ask any question or tell me what you would like to do'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<h3 class="anchor-fixed" id="button-clicked-web">buttonClicked event</h3><p>Fired when the user clicks the AI assistant button in the app.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"buttonClicked"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"micAllowed"</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"ts"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259901446</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259897357</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 19%"/>
<col style="width: 13%"/>
<col style="width: 69%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">buttonClicked</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">micAllowed</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Access to microphone during the dialog session: allowed (<code class="docutils literal notranslate"><span class="pre">true</span></code>) or denied (<code class="docutils literal notranslate"><span class="pre">false</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ts</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of when the AI assistant button was clicked</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="button-ready-web">buttonReady event</h3><p>Fired when Alan AI connects to the AI assistant project and is ready to listen to the user’s input.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"buttonReady"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259897357</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 24%"/>
<col style="width: 16%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">buttonReady</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="first-activate-web">firstActivate event</h3><p>Fired when the user activates the AI assistant for the first time during the dialog session.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"firstActivate"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259138126</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 23%"/>
<col style="width: 16%"/>
<col style="width: 61%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">firstActivate</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="first-click-web">firstClick event</h3><p>Fired when the user clicks the AI assistant button for the first time during the dialog session.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"firstClick"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"ts"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259398408</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259395336</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 21%"/>
<col style="width: 14%"/>
<col style="width: 65%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">firstClick</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ts</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of when the AI assistant button was clicked for the first time</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="mic-allowed-web">micAllowed event</h3><p>Fired when the user allows access to the microphone.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"micAllowed"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"ts"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259399772</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259395336</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 24%"/>
<col style="width: 16%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">micAllowed</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ts</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of when the microphone access was allowed</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="mic-prompt-web">micPermissionPrompt event</h3><p>Fired when a prompt to allow access to the microphone is displayed.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"micPermissionPrompt"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"ts"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259901443</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259897357</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 24%"/>
<col style="width: 16%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">micPermissionPrompt</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ts</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of when the prompt was displayed</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="recognized-web">recognized event</h3><p>Fired during and upon the user’s input recognition. The event description contains an interim or final result for the interpreted user’s phrase and the recognition state in the <code class="docutils literal notranslate"><span class="pre">final</span></code> field:</p>
<ul class="simple">
<li><p>If the user’s input is still being recognized, the <code class="docutils literal notranslate"><span class="pre">final</span></code> field value is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p>If the user’s input has been recognized, the <code class="docutils literal notranslate"><span class="pre">final</span></code> field value is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"recognized"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"final"</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"text"</span><span class="o">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666257658614</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 22%"/>
<col style="width: 15%"/>
<col style="width: 63%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">final</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>User’s input recognition state: final (<code class="docutils literal notranslate"><span class="pre">true</span></code>) or interim (<code class="docutils literal notranslate"><span class="pre">false</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>String</p></td>
<td><p>Interim or final result for the interpreted user’s input</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="popup-close-web">popupCloseClicked event</h3><p>Fired when the user clicks the close icon in the popup displayed next to the AI assistant button. For details, see <a class="reference internal" href="../../popups/"><span class="doc">Alan AI button popups</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"popupCloseClicked"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"ts"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259141166</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259138126</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 24%"/>
<col style="width: 16%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">popupCloseClicked</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ts</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of when the close icon was clicked</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="show-popup-web">showPopup event</h3><p>Fired when a popup next to the AI assistant button is displayed. For details, see <a class="reference internal" href="../../popups/"><span class="doc">Alan button popups</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"showPopup"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"ts"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259141166</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259138126</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 24%"/>
<col style="width: 16%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">showPopup</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ts</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of when the popup was displayed</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
</div>
<input id="dff95a9e-e615-4c99-861f-0e5d7ebf157e" name="c98aede4-35b7-4b93-ac1c-26cae3e8476d" type="radio"/>
<label class="tabbed-label" for="dff95a9e-e615-4c99-861f-0e5d7ebf157e">
iOS/Android</label><div class="tabbed-content docutils">
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 33%"/>
<col style="width: 67%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Event name</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="#button-ready-mobile">buttonReady</a></p></td>
<td><p>Fired when Alan AI connects to the virtual assistant project and is ready to listen to the user’s input</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="#first-click-mobile">firstClick</a></p></td>
<td><p>Fired when the user clicks the AI assistant button for the first time during the dialog session</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="#mic-allowed-mobile">micAllowed</a></p></td>
<td><p>Fired when the user allows access to the microphone</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="#mic-prompt-mobile">micPermissionPrompt</a></p></td>
<td><p>Fired when a prompt to allow access to the microphone is displayed</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="#recognized-mobile">recognized</a></p></td>
<td><p>Fired during and upon the user’s input recognition</p></td>
</tr>
</tbody>
</table></div>
<p>In the example below, the AI assistant listens to the <code class="docutils literal notranslate"><span class="pre">firstClick</span></code> event and, if the last interaction with the user occurred earlier than one day ago, plays a greeting to the user.</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">diffFrom</span><span class="p">(</span><span class="nx">ts</span><span class="p">,</span> <span class="nx">units</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">last = </span><span class="nx">DateTime</span><span class="p">.</span><span class="nx">fromMillis</span><span class="p">(</span><span class="nx">ts</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nv">now  = </span><span class="nx">DateTime</span><span class="p">.</span><span class="nx">local</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`now.diff(last): </span><span class="si">${</span><span class="nx">now</span><span class="p">.</span><span class="nx">diff</span><span class="p">(</span><span class="nx">last</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`units: </span><span class="si">${</span><span class="nx">units</span><span class="si">}</span><span class="sb">, now.diff(last).as(units): </span><span class="si">${</span><span class="nx">now</span><span class="p">.</span><span class="nx">diff</span><span class="p">(</span><span class="nx">last</span><span class="p">).</span><span class="kr">as</span><span class="p">(</span><span class="nx">units</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">now</span><span class="p">.</span><span class="nx">diff</span><span class="p">(</span><span class="nx">last</span><span class="p">).</span><span class="kr">as</span><span class="p">(</span><span class="nx">units</span><span class="p">);</span>
<span class="p">}</span>

<span class="kp">onUserEvent</span><span class="p">((</span><span class="nx">p</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">'event'</span><span class="p">,</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">e</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">event</span> <span class="o">==</span> <span class="s1">'firstClick'</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">diffFrom</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">userInfo</span><span class="p">.</span><span class="nx">lastInteractionTs</span><span class="p">,</span> <span class="s1">'days'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'(Hi|Hi there|Hello), I am Alan, your AI assistant. Ask any question or tell me what you would like to do'</span><span class="p">);</span>
       <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<h3 class="anchor-fixed" id="button-ready-mobile">buttonReady event</h3><p>Fired when Alan AI connects to the AI assistant project and is ready to listen to the user’s input.</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"buttonReady"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259897357</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 24%"/>
<col style="width: 16%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">buttonReady</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="first-click-mobile">firstClick event</h3><p>Fired when the user clicks the AI assistant button for the first time during the dialog session.</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id13" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"firstClick"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"ts"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259398408</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259395336</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 21%"/>
<col style="width: 14%"/>
<col style="width: 65%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">firstClick</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ts</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of when the AI assistant button was clicked for the first time</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="mic-allowed-mobile">micAllowed event</h3><p>Fired when the user allows access to the microphone.</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id14" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"micAllowed"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"ts"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259399772</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259395336</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 24%"/>
<col style="width: 16%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">micAllowed</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ts</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of when the microphone access was allowed</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="mic-prompt-mobile">micPermissionPrompt event</h3><p>Fired when a prompt to allow access to the microphone is displayed.</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id15" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"micPermissionPrompt"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"ts"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259901443</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666259897357</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 24%"/>
<col style="width: 16%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">micPermissionPrompt</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ts</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of when the prompt was displayed</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
<h3 class="anchor-fixed" id="recognized-mobile">recognized event</h3><p>Fired during and upon the user’s input recognition. The event description contains an interim or final result for the interpreted user’s phrase and the recognition state in the <code class="docutils literal notranslate"><span class="pre">final</span></code> field:</p>
<ul class="simple">
<li><p>If the user’s input is still being recognized, the <code class="docutils literal notranslate"><span class="pre">final</span></code> field value is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p>If the user’s input has been recognized, the <code class="docutils literal notranslate"><span class="pre">final</span></code> field value is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">Event object</span><a class="headerlink" href="#id16" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="s2">"event"</span><span class="o">:</span><span class="w"> </span><span class="s2">"recognized"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"final"</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"text"</span><span class="o">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"userInfo"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"interactions"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"recognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"unrecognized"</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastInteractionTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666255324364</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"lastConnectTs"</span><span class="o">:</span><span class="w"> </span><span class="mf">1666257658614</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 22%"/>
<col style="width: 15%"/>
<col style="width: 63%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Field name</strong></p></th>
<th class="head"><p><strong>Data type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>String</p></td>
<td><p>Event name: <code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">final</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>User’s input recognition state: final (<code class="docutils literal notranslate"><span class="pre">true</span></code>) or interim (<code class="docutils literal notranslate"><span class="pre">false</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>String</p></td>
<td><p>Interim or final result for the interpreted user’s input</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">interactions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of interactions with the user</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">recognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of recognized user’s interactions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unrecognized</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of unrecognized user’s interactions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lastInteractionTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last interaction with the AI assistant</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lastConnectTs</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Timestamp of the last connection to the AI assistant</p></td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="green-background"></div></div>
</div>

      </article>
	  <div class="alan-btn"></div>
	  <script>
		function isLocalStorageAvailable() {
            var result;

            try {
                localStorage.setItem('test', 1);
                localStorage.getItem('test');
                localStorage.removeItem('test');
                result = true;
            } catch (e) {
                result = false;
            }
            return result;
        }

        function getProjectId() {
            var key = 'beae1a6e1f7e512c4d0bf347580da6fd2e956eca572e1d8b807a3e2338fdd0dc/prod';
            if (key) {
                return key.substr(0, key.indexOf('/'));
            }

            return null;
        }

        console.info("Alan Lib is laoded.");
        window.alanBtnInstance = window.alanBtn({
            key: 'beae1a6e1f7e512c4d0bf347580da6fd2e956eca572e1d8b807a3e2338fdd0dc/prod',
            zIndex: 999999,
            onCommand: function (commandData) {

                if (commandData && commandData.command === 'openURL') {
                    if (commandData.target === '_blank'){
                        window.open(commandData.url,'_newtab' + Math.floor(Math.random()*999999));
                    } else {
                        window.location.href = commandData.url;
                    }

                }
            },
            onConnectionStatus: function (status) {
                if (status === 'authorized') {
                    window.alanBtnInstance.setVisualState({ page: window.location.pathname, url: window.location.href });
                    if(isLocalStorageAvailable()){
                        if(!localStorage.getItem('alan-btn-session-'+ getProjectId())) {
                            localStorage.setItem('alan-btn-session-'+ getProjectId(), 1)
                            window.alanBtnInstance.callProjectApi("sendGreetingMessage");
                        }
                    }
                }
            },
        });
	  </script>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        
	  <div class="alan-footer">
	  <div class="footer-logo-and-social-icons">
		<div class="footer-logo-and-text">
		<a class="footer-logo" aria-label="Link to alan.app" href="https://alan.app/"></a>
		</div>
		<div class="footer-text">
		<span>Alan AI<sup>®</sup> is a trademark of Alan AI, Inc.</span>
		<span>Handcrafted in Sunnyvale, California</span>
		</div>
		<div class="footer-other">
		<div class="footer-social">
			<a href="https://twitter.com/alanvoiceai" target="_blank" class="fa-brands fa-twitter"></a>
			<a href="http://linkedin.com/company/alanvoiceai" target="_blank" class="fa-brands fa-linkedin"></a>
			<a href="https://www.facebook.com/alanvoiceai/" target="_blank" class="fa-brands fa-facebook"></a>
			<a href="https://www.instagram.com/alanvoiceai/" target="_blank" class="fa-brands fa-instagram"></a>
			<a href="https://www.youtube.com/channel/UCrsg0b32nL6L2j5jG7uxOuw" target="_blank" class="fa-brands fa-youtube"></a>
			<a href="https://alanaigroup.slack.com/join/shared_invite/enQtNzMzOTE5MTIwMjg4LWI4ZmM4MTNkMTdmY2M0ZWEwODlmZDQ5Y2ZkMjUzNmMyZDJiMzA0Y2M1NDdhYzZjYWFlZTA5NjM4OTU0MWFmNWU#/shared-invite/email" target="_blank" class="fa-brands fa-slack"></a>
			<a href="https://github.com/alan-ai" target="_blank" class="fa-brands fa-github"></a>
        </div>
		</div>
	  </div>
	  <div class="footer-badges">
	  <div class="footer-badges-info">
	  <div class="footer-badges-info-icon"></div>
	  <div>Download Alan Playground to see how Conversational Voice Experiences can add value to your application or test your Alan Studio Projects.</div>
	  </div>
	  
	  </div>
	  <div class="footer-badges-imgs">
	  <a class="footer_badges_imgs_app-store" href="https://apps.apple.com/ca/app/alan-playground/id1474478921"></a>
	  <a class="footer_badges_imgs_google-play" href="https://play.google.com/store/apps/details?id=app.alan.playground"></a>
	  </div>
	  
	  </div>
	  
      </footer>
	
    </div>
	
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">User events</a><ul>
<li><a class="reference internal" href="#types-of-events">Types of events</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  
  </main>
</div>
</div>

    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/custom.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/typesense-docsearch.js@latest/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../../../_static/scripts/algolia.js"></script>
    <script defer="defer" src="../../../_static/scripts/algolia-mobile.js"></script>
    <script src="../../../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>