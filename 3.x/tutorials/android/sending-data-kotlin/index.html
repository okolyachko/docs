<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../genindex/" /><link rel="search" title="Search" href="../../../search/" />

    <link rel="shortcut icon" href="../../../_static/favicon.ico"/><meta name="generator" content="sphinx-3.5.4, furo 2021.04.11.beta34"/>
        <title>Sending data from the app to the dialog script (Kotlin) | Alan Docs</title>
      <link rel="stylesheet" href="../../../_static/styles/furo.css?digest=59ab60ac09ea94ccfe6deddff6d715cce948a6fc">
    <link rel="stylesheet" href="../../../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../../_static/pygments_dark.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    


<style>
  :root {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/algolia.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/typesense-docsearch.js@latest/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" href="../../../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b">
    <link rel="shortcut icon" type="image/x-icon" href="../../../_static/favicon.ico">
	<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
	<link rel="canonical" href="https://alan.app/docs/tutorials/android/sending-data-kotlin/"/>
    <script type="text/javascript" src= "https://studio.alan.app/web/lib/alan_lib.min.js"></script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-QTCQV2T397"></script>
        <script>
        	window.dataLayer = window.dataLayer || [];
        	function gtag(){dataLayer.push(arguments);}
        	gtag('js', new Date());
		
        	gtag('config', window.location.hostname === "alan.app" ? 'G-QTCQV2T397' : 'G-H4F9QS7RMX');
	</script>
</head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="-5 -3 24 24"
      stroke="currentColor"
      class="feather feather-chevron-right">
      <path d="M11 9l-6 5.25V3.75z"></path>
    </svg>
  </symbol>
</svg>


    <link rel="shortcut icon" type="image/x-icon" href="../../../_static/favicon.ico">
	<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
	<link rel="canonical" href="https://alan.app/docs/tutorials/android/sending-data-kotlin/"/>
    <script type="text/javascript" src= "https://studio.alan.app/web/lib/alan_lib.min.js"></script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-QTCQV2T397"></script>
        <script>
        	window.dataLayer = window.dataLayer || [];
        	function gtag(){dataLayer.push(arguments);}
        	gtag('js', new Date());
		
        	gtag('config', window.location.hostname === "alan.app" ? 'G-QTCQV2T397' : 'G-H4F9QS7RMX');
	</script>



<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>


<div class="header-new">
<div class="header-content">
		<div class="logo-part">
			<div class="logo"> 
			
             <div class="sidebar-logo-container">
				<a href="https://alan.app"><img class="sidebar-logo" src="../../../_static/alan-logo.svg" alt="Logo"/></a>
				<div class="docs">
					
					<a href="../../../"> 
					
					</div>
				</div>
			
			</div>
			
			
			</a>
		</div>
        
		
		<div class="right-block">
		
		<!--<div class="dropdown" id="version">
		  <button class="dropbtn">4.2</button><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i>
		  <div id="myDropdown" class="dropdown-content">
			<a href="javascript:void(0);" class="drop-link">4.2</a>
			<a href="javascript:void(0);" class="drop-link">4.1</a>
			<a href="javascript:void(0);" class="drop-link">3.x</a>
		  </div>
		</div>
		
		<div class="dropdown" id="platform">
		  <button class="dropbtn">Framework/language</button><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i>
		  <div id="myDropdown" class="dropdown-content">
			<a href="javascript:void(0);" class="drop-link">Web (React, Angular, etc.)</a>
			<a href="javascript:void(0);" class="drop-link">Objective-C</a>
			<a href="javascript:void(0);" class="drop-link">Swift</a>
			<a href="javascript:void(0);" class="drop-link">Kotlin</a>
			<a href="javascript:void(0);" class="drop-link">Java</a>
			<a href="javascript:void(0);" class="drop-link">Flutter</a>
			<a href="javascript:void(0);" class="drop-link">Ionic</a>
			<a href="javascript:void(0);" class="drop-link">React Native</a>
		  </div>
		</div>-->
		
		<!-- First Dropdown -->
		<div class="dropdown" id="version">
			<button>Version</button>
			<div class="dropdown-content">
				<a href="javascript:void(0);">4.2</a>
				<a href="javascript:void(0);">4.1</a>
				<a href="javascript:void(0);">3.x</a>
			</div>
		</div>

		<!-- Second Dropdown -->
		<div class="dropdown" id="platform">
			<button>Framework/language</button>
			<div class="dropdown-content">
				<a href="javascript:void(0);">Web (React, Angular, etc.)</a>
				<a href="javascript:void(0);">Objective-C</a>
				<a href="javascript:void(0);">Swift</a>
				<a href="javascript:void(0);">Kotlin</a>
				<a href="javascript:void(0);">Java</a>
				<a href="javascript:void(0);">Flutter</a>
				<a href="javascript:void(0);">Ionic</a>
				<a href="javascript:void(0);">React Native</a>

			</div>
		</div>
		
		
		<div class="goto"><a class="docs-tooltip-link" target="_blank"></a>
		<span class="docs-tooltip">Go to docs</span>
		</div>
		
		<div class="search-box">   
			<form class="sidebar-search-container" >
				<input class="sidebar-search" placeholder=Search name="q" ={sendRequestDebounce}>
				<input type="hidden" name="check_keywords" value="yes">
				<input type="hidden" name="area" value="default">
			</form>
			
			
		</div>
		<div class="social">
			<a href="https://alanaigroup.slack.com/join/shared_invite/enQtNzMzOTE5MTIwMjg4LWI4ZmM4MTNkMTdmY2M0ZWEwODlmZDQ5Y2ZkMjUzNmMyZDJiMzA0Y2M1NDdhYzZjYWFlZTA5NjM4OTU0MWFmNWU#/shared-invite/email" target="_blank" class="fa-brands fa-slack fa-lg"></a>
			<a href="https://github.com/alan-ai" target="_blank" class="fa-brands fa-github fa-lg"></a>
        </div>
		</div>
		</div>
    </div>

	  
		
		
	
	</div>
<div class="page">
  
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <div class="logo-part">
			<div class="logo"> 
			
             <div class="sidebar-logo-container">
				<a href="https://alan.app"><img class="sidebar-logo" src="../../../_static/alan-logo.svg" alt="Logo"/></a>
			</div>
			
			</div>
			
			<div class="docs">
			
			<a href="../../../"> 
			
			</div>
			</a>
		</div>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../../contents/">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../../_static/alan-logo.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container">
  <input class="sidebar-search search-mobile" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../">Get started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../usage/how-works/about/">How Alan AI works</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/how-works/basics/">Alan AI basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/how-works/infrastructure/">Alan AI infrastructure</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/how-works/deployment/">Deployment options</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/how-works/cloud-deployment/">Cloud deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/how-works/hybrid-deployment/">Hybrid deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/how-works/on-premises-deployment/">On-premises deployment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/how-works/voice-processing/">Voice processing</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../usage/guides/studio/">Alan AI Studio</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/guides/projects/">Alan AI projects</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/guides/scripts/">Dialog scripts</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/managing-scripts/">Managing scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/importing-scripts/">Exporting and importing scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/sharing-github/">Sharing and keeping scripts in GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/using-shortcuts/">Using shortcuts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/changing-theme/">Changing the theme and font size</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/viewing-flowchart/">Viewing the script flowchart</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/guides/versioning/">Versions and environments</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/guides/script-testing/">Testing and debugging</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/debugging-chat/">Debugging Chat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/studio-test-tools/">Tools to simulate in-app behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/test-view/">Test View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/logs/">Alan AI Studio logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/in-app-testing/">In-app testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/guides/playground/">Alan AI Playground</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/guides/analytics/">Conversational analytics</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/dashboard/">Projects dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/guides/analytics-view/">Analytics View</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/guides/billing/">Billing and subscriptions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../usage/button/overview/">Alan AI assistant</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/button/customization/">Customizing the AI assistant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/button/chat/">Enabling the Alan AI Chat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/button/cohorts/">Setting up cohorts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/button/activation/">Starting and stopping dialog sessions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/additional/supported-platforms/">Supported platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/additional/library/">Alan AI resource library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/updates/">Recent Alan AI Platform updates</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div id="orange-background"></div><div class="section" id="sending-data-from-the-app-to-the-dialog-script-kotlin">
<h1>Sending data from the app to the dialog script (Kotlin)<a class="headerlink" href="#sending-data-from-the-app-to-the-dialog-script-kotlin" title="Permalink to this headline">¶</a></h1>
<p>In some cases, you need to send data from your app to the voice assistant to use it in your dialog. For that, you can use <a class="reference internal" href="../../../server-api/sending-data/project-api/"><span class="doc">Alan AI’s project API functionality</span></a>. Project API allows sending any information from the app to the dialog script and triggering activities without a voice command. To use it, we need to do the following:</p>
<ol class="arabic simple">
<li><p>Define a new project API method in the dialog script</p></li>
<li><p>Call this method from the app</p></li>
</ol>
<p>In this tutorial, we will send the information about a list item to the dialog script and add it to the favorites list. The user will then be able to ask what items are added to favorites, and the voice assistant will list them.</p>
<div class="section" id="what-you-will-learn">
<h2>What you will learn<a class="headerlink" href="#what-you-will-learn" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>How to send arbitrary data from the dialog script to the app</p></li>
<li><p>How to trigger activities without a voice command</p></li>
</ul>
</div>
<div class="section" id="what-you-will-need">
<h2>What you will need<a class="headerlink" href="#what-you-will-need" title="Permalink to this headline">¶</a></h2>
<p>For this tutorial, we will use the app created in the <a class="reference internal" href="../integrating-java-kotlin/"><span class="doc">Building a voice assistant for an Android Java or Kotlin app</span></a> tutorial.</p>
</div>
<div class="section" id="step-1-add-a-list-of-items">
<h2>Step 1. Add a list of items<a class="headerlink" href="#step-1-add-a-list-of-items" title="Permalink to this headline">¶</a></h2>
<p>First, we need to add a list of items to one of app’s tabs.</p>
<ol class="arabic">
<li><p>Add a new fragment to the app: right-click the app folder and select <strong>New</strong> &gt; <strong>Fragment</strong> &gt; <strong>Fragment (List)</strong>. In the displayed window, click <strong>Finish</strong>.</p>
<img alt="../../../_images/add-list-fragment.png" src="../../../_images/add-list-fragment.png"/>
</li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">SectionsPagerAdapter</span></code> file and update the <code class="docutils literal notranslate"><span class="pre">getItem()</span></code> function to add the list to the first tab:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">SectionsPagerAdapter</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nc">SectionsPagerAdapter</span><span class="p">(</span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">context</span><span class="p">:</span><span class="w"> </span><span class="n">Context</span><span class="p">,</span><span class="w"> </span><span class="n">fm</span><span class="p">:</span><span class="w"> </span><span class="n">FragmentManager</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">FragmentPagerAdapter</span><span class="p">(</span><span class="n">fm</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItem</span><span class="p">(</span><span class="n">position</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">):</span><span class="w"> </span><span class="n">Fragment</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">/// Placing list onto first tab</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">when</span><span class="p">(</span><span class="n">position</span><span class="p">){</span>
<span class="w">      </span><span class="m">0</span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ItemFragment</span><span class="p">()</span>
<span class="w">      </span><span class="k">else</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">PlaceholderFragment</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">position</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">MyItemRecyclerViewAdapter</span></code> file and in the <code class="docutils literal notranslate"><span class="pre">ViewHolder</span></code> class, register the <code class="docutils literal notranslate"><span class="pre">onClickListener</span></code> for the item list:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">MyItemRecyclerViewAdapter</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nc">MyItemRecyclerViewAdapter</span><span class="p">(</span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">values</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PlaceholderItem</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">RecyclerView</span><span class="p">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">MyItemRecyclerViewAdapter</span><span class="p">.</span><span class="na">ViewHolder</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">inner</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">ViewHolder</span><span class="p">(</span><span class="n">binding</span><span class="p">:</span><span class="w"> </span><span class="n">FragmentItemBinding</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">RecyclerView</span><span class="p">.</span><span class="na">ViewHolder</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="na">root</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">/// Registering click listener</span>
<span class="w">    </span><span class="k">init</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">itemView</span><span class="p">.</span><span class="na">setOnClickListener</span><span class="p">{</span><span class="n">v</span><span class="p">:</span><span class="w"> </span><span class="n">View</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">position</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bindingAdapterPosition</span>
<span class="w">        </span><span class="n">Toast</span><span class="p">.</span><span class="na">makeText</span><span class="p">(</span><span class="n">itemView</span><span class="p">.</span><span class="na">context</span><span class="p">,</span><span class="w"> </span><span class="s">"Item # </span><span class="si">${</span><span class="n">position</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="si">}</span><span class="s"> is added to favorites"</span><span class="p">,</span><span class="w"> </span><span class="n">Toast</span><span class="p">.</span><span class="na">LENGTH_SHORT</span><span class="p">).</span><span class="na">show</span><span class="p">()</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</li>
</ol>
<p>Run the app. You can now click an item in the list, and the item position will be displayed in the toast message.</p>
</div>
<div class="section" id="step-2-define-a-project-api-method">
<h2>Step 2. Define a project API method<a class="headerlink" href="#step-2-define-a-project-api-method" title="Permalink to this headline">¶</a></h2>
<p>To make the favorites list, let’s get the item position, send it to the dialog script and add it to the <code class="docutils literal notranslate"><span class="pre">favorites</span></code> array on the script side when an item is clicked.</p>
<p>In Alan AI Studio, add the following code to the dialog script:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">onCreateUser</span><span class="p">(</span><span class="nx">p</span> <span class="p">=&gt;</span> <span class="k k-Alan">p.</span><span class="nv">userData.favorites = </span><span class="p">[]);</span>

<span class="nv">projectAPI.getPosition = </span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">pos</span><span class="p">);</span>
    <span class="nx">callback</span><span class="p">();</span>
<span class="p">}</span>

<span class="kp">intent</span><span class="p">(</span><span class="s1">'What are my favorites?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'You have added the following items to favorites'</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nv">i = </span><span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k k-Alan">p.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">itemPosition = </span><span class="k k-Alan">p.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorites</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
        <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Item </span><span class="si">${</span><span class="nx">itemPosition</span> <span class="o">+</span> <span class="mf">1</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<p>Here, when the user starts a dialog with the voice assistant, we are first creating an empty favorites array. For that, we are using Alan AI’s <a class="reference internal" href="../../../server-api/api/api-reference/#oncreateuser"><span class="std std-ref">onCreateUser predefined callback</span></a>.</p>
<p>Next, we are defining the <code class="docutils literal notranslate"><span class="pre">getPosition()</span></code> project API method that gets the item position and pushes it to the <code class="docutils literal notranslate"><span class="pre">favorites</span></code> array. And finally, we are adding an intent to check the favorites list contents.</p>
</div>
<div class="section" id="step-3-call-the-project-api-method-in-the-app">
<h2>Step 3. Call the project API method in the app<a class="headerlink" href="#step-3-call-the-project-api-method-in-the-app" title="Permalink to this headline">¶</a></h2>
<p>After we have defined the method in the dialog script, we need to call it in the app.</p>
<ol class="arabic">
<li><p>In the IDE, open the <code class="docutils literal notranslate"><span class="pre">MainActivity.kt</span></code> file and add the <code class="docutils literal notranslate"><span class="pre">callProjectApi()</span></code> function to the <code class="docutils literal notranslate"><span class="pre">MainActivity</span></code> class.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">MainActivity.kt</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nc">MainActivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">AppCompatActivity</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">/// Calling projectAPI.getPosition from the dialog script</span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">callProjectApi</span><span class="p">(</span><span class="n">itemPosition</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">/// Providing item position</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">()</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">params</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">"pos"</span><span class="p">,</span><span class="w"> </span><span class="n">itemPosition</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">JSONException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">e</span><span class="p">.</span><span class="na">message</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="nb">it</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">alanButton</span><span class="o">?.</span><span class="na">callProjectApi</span><span class="p">(</span><span class="s">"script::getPosition"</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Here, we are using the <a class="reference internal" href="../../../client-api/methods/common-api/#callprojectapi"><span class="std std-ref">callProjectApi() method</span></a> to call the <code class="docutils literal notranslate"><span class="pre">getPosition()</span></code> method added to the dialog script.</p>
</li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">MyItemRecyclerViewAdapter</span></code> file and update the <code class="docutils literal notranslate"><span class="pre">onClickListener</span></code> to call the <code class="docutils literal notranslate"><span class="pre">callProjectApi()</span></code> function from the <code class="docutils literal notranslate"><span class="pre">MainActivity</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">MyItemRecyclerViewAdapter</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nc">MyItemRecyclerViewAdapter</span><span class="p">(</span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">values</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">PlaceholderItem</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">RecyclerView</span><span class="p">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">MyItemRecyclerViewAdapter</span><span class="p">.</span><span class="na">ViewHolder</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">inner</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">ViewHolder</span><span class="p">(</span><span class="n">binding</span><span class="p">:</span><span class="w"> </span><span class="n">FragmentItemBinding</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">RecyclerView</span><span class="p">.</span><span class="na">ViewHolder</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="na">root</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">/// Registering the click listener</span>
<span class="w">    </span><span class="k">init</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">itemView</span><span class="p">.</span><span class="na">setOnClickListener</span><span class="p">{</span><span class="n">v</span><span class="p">:</span><span class="w"> </span><span class="n">View</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">position</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bindingAdapterPosition</span>
<span class="w">        </span><span class="n">Toast</span><span class="p">.</span><span class="na">makeText</span><span class="p">(</span><span class="n">itemView</span><span class="p">.</span><span class="na">context</span><span class="p">,</span><span class="w"> </span><span class="s">"Item # </span><span class="si">${</span><span class="n">position</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="si">}</span><span class="s"> is added to favorites"</span><span class="p">,</span><span class="w"> </span><span class="n">Toast</span><span class="p">.</span><span class="na">LENGTH_SHORT</span><span class="p">).</span><span class="na">show</span><span class="p">()</span>
<span class="w">        </span><span class="c1">/// Calling the callProjectApi() function</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">activity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">contentView</span><span class="p">.</span><span class="na">context</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Activity</span>
<span class="w">        </span><span class="p">(</span><span class="n">activity</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">MainActivity</span><span class="p">).</span><span class="na">callProjectApi</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</li>
</ol>
<p>You can test it: run the app and tap several items in the list. Then tap the Alan AI button and ask: <code class="docutils literal notranslate"><span class="pre">What</span> <span class="pre">are</span> <span class="pre">my</span> <span class="pre">favorites?</span></code> The AI assistant will list all items you have tapped.</p>
</div>
</div>

      </article>
	  <div class="alan-btn"></div>
	  <script>
		function isLocalStorageAvailable() {
            var result;

            try {
                localStorage.setItem('test', 1);
                localStorage.getItem('test');
                localStorage.removeItem('test');
                result = true;
            } catch (e) {
                result = false;
            }
            return result;
        }

        function getProjectId() {
            var key = 'beae1a6e1f7e512c4d0bf347580da6fd2e956eca572e1d8b807a3e2338fdd0dc/prod';
            if (key) {
                return key.substr(0, key.indexOf('/'));
            }

            return null;
        }

        console.info("Alan Lib is laoded.");
        window.alanBtnInstance = window.alanBtn({
            key: 'beae1a6e1f7e512c4d0bf347580da6fd2e956eca572e1d8b807a3e2338fdd0dc/prod',
            zIndex: 999999,
            onCommand: function (commandData) {

                if (commandData && commandData.command === 'openURL') {
                    if (commandData.target === '_blank'){
                        window.open(commandData.url,'_newtab' + Math.floor(Math.random()*999999));
                    } else {
                        window.location.href = commandData.url;
                    }

                }
            },
            onConnectionStatus: function (status) {
                if (status === 'authorized') {
                    window.alanBtnInstance.setVisualState({ page: window.location.pathname, url: window.location.href });
                    if(isLocalStorageAvailable()){
                        if(!localStorage.getItem('alan-btn-session-'+ getProjectId())) {
                            localStorage.setItem('alan-btn-session-'+ getProjectId(), 1)
                            window.alanBtnInstance.callProjectApi("sendGreetingMessage");
                        }
                    }
                }
            },
        });
	  </script>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        
	  <div class="alan-footer">
	  <div class="footer-logo-and-social-icons">
		<div class="footer-logo-and-text">
		<a class="footer-logo" aria-label="Link to alan.app" href="https://alan.app/"></a>
		</div>
		<div class="footer-text">
		<span>Alan AI<sup>®</sup> is a trademark of Alan AI, Inc.</span>
		<span>Handcrafted in Sunnyvale, California</span>
		</div>
		<div class="footer-other">
		<div class="footer-social">
			<a href="https://twitter.com/alanvoiceai" target="_blank" class="fa-brands fa-twitter"></a>
			<a href="http://linkedin.com/company/alanvoiceai" target="_blank" class="fa-brands fa-linkedin"></a>
			<a href="https://www.facebook.com/alanvoiceai/" target="_blank" class="fa-brands fa-facebook"></a>
			<a href="https://www.instagram.com/alanvoiceai/" target="_blank" class="fa-brands fa-instagram"></a>
			<a href="https://www.youtube.com/channel/UCrsg0b32nL6L2j5jG7uxOuw" target="_blank" class="fa-brands fa-youtube"></a>
			<a href="https://alanaigroup.slack.com/join/shared_invite/enQtNzMzOTE5MTIwMjg4LWI4ZmM4MTNkMTdmY2M0ZWEwODlmZDQ5Y2ZkMjUzNmMyZDJiMzA0Y2M1NDdhYzZjYWFlZTA5NjM4OTU0MWFmNWU#/shared-invite/email" target="_blank" class="fa-brands fa-slack"></a>
			<a href="https://github.com/alan-ai" target="_blank" class="fa-brands fa-github"></a>
        </div>
		</div>
	  </div>
	  <div class="footer-badges">
	  <div class="footer-badges-info">
	  <div class="footer-badges-info-icon"></div>
	  <div>Download Alan Playground to see how Conversational Voice Experiences can add value to your application or test your Alan Studio Projects.</div>
	  </div>
	  
	  </div>
	  <div class="footer-badges-imgs">
	  <a class="footer_badges_imgs_app-store" href="https://apps.apple.com/ca/app/alan-playground/id1474478921"></a>
	  <a class="footer_badges_imgs_google-play" href="https://play.google.com/store/apps/details?id=app.alan.playground"></a>
	  </div>
	  
	  </div>
	  
      </footer>
	
    </div>
	
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Sending data from the app to the dialog script (Kotlin)</a><ul>
<li><a class="reference internal" href="#what-you-will-learn">What you will learn</a></li>
<li><a class="reference internal" href="#what-you-will-need">What you will need</a></li>
<li><a class="reference internal" href="#step-1-add-a-list-of-items">Step 1. Add a list of items</a></li>
<li><a class="reference internal" href="#step-2-define-a-project-api-method">Step 2. Define a project API method</a></li>
<li><a class="reference internal" href="#step-3-call-the-project-api-method-in-the-app">Step 3. Call the project API method in the app</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  
  </main>
</div>
</div>

    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/custom.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/typesense-docsearch.js@latest/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../../../_static/scripts/algolia.js"></script>
    <script defer="defer" src="../../../_static/scripts/algolia-mobile.js"></script>
    <script src="../../../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>