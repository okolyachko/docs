<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../genindex/" /><link rel="search" title="Search" href="../../search/" /><link rel="next" title="Alan AI tutorials" href="../list-all/" /><link rel="prev" title="onEvent handler" href="../../client-api/methods/event-handler/" />

    <link rel="shortcut icon" href="../../_static/favicon.ico"/><meta name="generator" content="sphinx-3.5.4, furo 2021.04.11.beta34"/>
        <title>How-Tos | Alan Docs</title>
      <link rel="stylesheet" href="../../_static/styles/furo.css?digest=59ab60ac09ea94ccfe6deddff6d715cce948a6fc">
    <link rel="stylesheet" href="../../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../_static/pygments_dark.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    


<style>
  :root {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/algolia.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/typesense-docsearch.js@latest/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" href="../../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b">
    <link rel="shortcut icon" type="image/x-icon" href="../../_static/favicon.ico">
	<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
	<link rel="canonical" href="https://alan.app/docs/tutorials/how-tos/"/>
    <script type="text/javascript" src= "https://studio.alan.app/web/lib/alan_lib.min.js"></script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-QTCQV2T397"></script>
        <script>
        	window.dataLayer = window.dataLayer || [];
        	function gtag(){dataLayer.push(arguments);}
        	gtag('js', new Date());
		
        	gtag('config', window.location.hostname === "alan.app" ? 'G-QTCQV2T397' : 'G-H4F9QS7RMX');
	</script>
</head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="-5 -3 24 24"
      stroke="currentColor"
      class="feather feather-chevron-right">
      <path d="M11 9l-6 5.25V3.75z"></path>
    </svg>
  </symbol>
</svg>


    <link rel="shortcut icon" type="image/x-icon" href="../../_static/favicon.ico">
	<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
	<link rel="canonical" href="https://alan.app/docs/tutorials/how-tos/"/>
    <script type="text/javascript" src= "https://studio.alan.app/web/lib/alan_lib.min.js"></script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-QTCQV2T397"></script>
        <script>
        	window.dataLayer = window.dataLayer || [];
        	function gtag(){dataLayer.push(arguments);}
        	gtag('js', new Date());
		
        	gtag('config', window.location.hostname === "alan.app" ? 'G-QTCQV2T397' : 'G-H4F9QS7RMX');
	</script>



<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>


<div class="header-new">
<div class="header-content">
		<div class="logo-part">
			<div class="logo"> 
			
             <div class="sidebar-logo-container">
				<div class="alan-logo"><a href="https://alan.app"><img class="sidebar-logo" src="../../_static/alan-logo.svg" alt="Logo"/></a></div>
				<div class="docs">
					
					<a href="../../"> 
					
					</div>
				</div>
			
			</div>
			
			
			</a>
		</div>
        
		
		<div class="right-block">
		
		<!-- First Dropdown -->
		<div class="dropdown" id="version">
			<button class="dropbtn">3.x</button>
			<div class="dropdown-content">
				<a href="javascript:void(0);">4.2</a>
				<a href="javascript:void(0);">3.x</a>
			</div>
		</div>

		<!-- Second Dropdown -->
		<div class="dropdown" id="platform">
			<button class="dropbtn">Framework/language</button>
			<div class="dropdown-content">
				<a href="javascript:void(0);">Web (React, Angular, etc.)</a>
				<a href="javascript:void(0);">Objective-C</a>
				<a href="javascript:void(0);">Swift</a>
				<a href="javascript:void(0);">Kotlin</a>
				<a href="javascript:void(0);">Java</a>
				<a href="javascript:void(0);">Flutter</a>
				<a href="javascript:void(0);">Ionic</a>
				<a href="javascript:void(0);">React Native</a>

			</div>
		</div>
		
		
		<div class="goto"><a class="docs-tooltip-link" target="_blank"></a>
		<span class="docs-tooltip">Go to docs</span>
		</div>
		
		<div class="search-box">   
			<form class="sidebar-search-container" >
				<input class="sidebar-search" placeholder=Search name="q" ={sendRequestDebounce}>
				<input type="hidden" name="check_keywords" value="yes">
				<input type="hidden" name="area" value="default">
			</form>
			
			
		</div>
		<div class="social">
			<a href="https://alanaigroup.slack.com/join/shared_invite/enQtNzMzOTE5MTIwMjg4LWI4ZmM4MTNkMTdmY2M0ZWEwODlmZDQ5Y2ZkMjUzNmMyZDJiMzA0Y2M1NDdhYzZjYWFlZTA5NjM4OTU0MWFmNWU#/shared-invite/email" target="_blank" class="fa-brands fa-slack fa-lg"></a>
			<a href="https://github.com/alan-ai" target="_blank" class="fa-brands fa-github fa-lg"></a>
        </div>
		</div>
		</div>
	<div class="version-note"><p>You are viewing the documentation for an earlier version of the Alan AI Platform.</p></div>		
    </div>

	  
		
		
	
	</div>
<div class="page">
  
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <div class="logo-part">
			<div class="logo"> 
			
             <div class="sidebar-logo-container">
				<a href="https://alan.app"><img class="sidebar-logo" src="../../_static/alan-logo.svg" alt="Logo"/></a>
			</div>
			
			</div>
			
			<div class="docs">
			
			<a href="../../"> 
			
			</div>
			</a>
		</div>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../contents/">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/alan-logo.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container">
  <input class="sidebar-search search-mobile" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../">Get started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../usage/how-works/about/">How Alan AI works</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../usage/how-works/basics/">Alan AI basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/how-works/infrastructure/">Alan AI infrastructure</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/how-works/deployment/">Deployment options</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/how-works/cloud-deployment/">Cloud deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/how-works/hybrid-deployment/">Hybrid deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/how-works/on-premises-deployment/">On-premises deployment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/how-works/voice-processing/">Voice processing</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../usage/guides/studio/">Alan AI Studio</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../usage/guides/projects/">Alan AI projects</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/guides/scripts/">Dialog scripts</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/managing-scripts/">Managing scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/importing-scripts/">Exporting and importing scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/sharing-github/">Sharing and keeping scripts in GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/using-shortcuts/">Using shortcuts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/changing-theme/">Changing the theme and font size</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/viewing-flowchart/">Viewing the script flowchart</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/guides/versioning/">Versions and environments</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/guides/script-testing/">Testing and debugging</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/debugging-chat/">Debugging Chat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/studio-test-tools/">Tools to simulate in-app behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/test-view/">Test View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/logs/">Alan AI Studio logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/in-app-testing/">In-app testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/guides/playground/">Alan AI Playground</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/guides/analytics/">Conversational analytics</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/dashboard/">Projects dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/analytics-view/">Analytics View</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/guides/billing/">Billing and subscriptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/guides/plugin/">Alan AI Plugin</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../usage/button/overview/">Alan AI assistant</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../usage/button/customization/">Customizing the AI assistant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/button/chat/">Enabling the Alan AI Chat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/button/cohorts/">Setting up cohorts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/button/activation/">Starting and stopping dialog sessions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/additional/supported-platforms/">Supported platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/additional/library/">Alan AI resource library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/updates/">Recent Alan AI Platform updates</a></li>
</ul>
<p class="caption"><span class="caption-text">Server API</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../server-api/script-concepts/">Dialog script concepts</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../server-api/commands-and-responses/">Requests and responses</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label for="toctree-checkbox-9"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../server-api/intent-matching/">Intent matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../server-api/voice-settings/">Voice settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/patterns/">Patterns</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../server-api/slots/">Slots</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label for="toctree-checkbox-10"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../server-api/user-defined-slots/">User-defined slots (static)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../server-api/dynamic-slots/">Dynamic slots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../server-api/regex-slots/">Regex slots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../server-api/predefined-slots/">Predefined slots</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/contexts/">Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/objects/">Predefined script objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/built-in-javascript-libraries/">Built-in JavaScript libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/error-handling/">Error handling and re-prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/lifecycle/">Lifecycle callbacks</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../server-api/sending-data/communication/">Sending data from the app</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label for="toctree-checkbox-11"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/sending-data/authdata/">authData</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/sending-data/visual-state/">Visual state</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/sending-data/project-api/">Project API</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../server-api/user-data/overview/">User data</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label for="toctree-checkbox-12"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/user-data/events/">User events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/user-data/client-object/">Client object</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../server-api/qna/">Question answering</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../server-api/widgets/">UI widgets</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label for="toctree-checkbox-13"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/chat-cards/">Chat cards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/chat-buttons/">Chat buttons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/popups/">Alan AI button popups</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../server-api/api/api-reference/">API reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../client-api/integration/">Integration overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../client-api/web/web-api/">Web frameworks</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label for="toctree-checkbox-14"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/web/react/">React</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/web/angular/">Angular</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/web/vue/">Vue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/web/ember/">Ember</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/web/vanilla/">JavaScript</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/web/electron/">Electron</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/web/web-component/">Cross-platform solutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/web/server-side-rendering/">Server-side rendering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../client-api/ios/ios-api/">iOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client-api/android/android-api/">Android</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../client-api/cross-platform/overview/">Cross-platform frameworks</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label for="toctree-checkbox-15"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/cross-platform/flutter/">Flutter</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../client-api/cross-platform/ionic/">Ionic</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label for="toctree-checkbox-16"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../client-api/cross-platform/ionic-react/">Ionic React</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../client-api/cross-platform/ionic-angular/">Ionic Angular</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../client-api/cross-platform/ionic-vue/">Ionic Vue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../client-api/cross-platform/ionic-capacitor/">iOS and Android deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../client-api/cross-platform/ionic-communicating/">Communication between components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../client-api/cross-platform/ionic-troubleshooting/">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/cross-platform/react-native/">React Native</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/cross-platform/cordova/">Apache Cordova</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Alan AI SDK toolkit</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../client-api/methods/common-api/">Client API methods</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../client-api/methods/handlers/">Alan AI handlers</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label for="toctree-checkbox-17"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/methods/command-handler/">onCommand handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/methods/state-handler/">onButtonState handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/methods/connection-handler/">onConnectionStatus handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/methods/event-handler/">onEvent handler</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Samples &amp; Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">How-tos</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../list-all/">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label for="toctree-checkbox-18"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../list/chat-list/">Alan AI Chat</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label for="toctree-checkbox-19"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../list/building-ai-chat/">Create an AI chat for a website</a></li>
<li class="toctree-l3"><a class="reference internal" href="../list/adding-greeting/">Add a greeting to the AI chat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../list/using-buttons/">Use buttons in the AI chat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../list/collecting-data-chat/">Collect data with the AI chat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../list/sending-emails/">Send emails from the AI chat</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../list/web-list/">Web</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label for="toctree-checkbox-20"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../list/adding-voice-to-a-web-application/">Building a voice assistant for web</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../list/food-delivery-tutorial/">Creating a voice-enabled food delivery app: complete tutorial</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label for="toctree-checkbox-21"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-create-app/">Step 1: Create a web app</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-create-voice-assistant/">Step 2: Create a voice assistant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-integrate/">Step 3: Integrate Alan AI with the app</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-add-command/">Step 4: Add a voice command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-alternatives/">Step 5: Specify options and alternatives</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-slots/">Step 6: Pick out important data with slots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-several-items/">Step 7: Add several items</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-display-items/">Step 8: Send a command to display items in the cart</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-slot-labels/">Step 9: Use slot labels to display the order</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-remove-items/">Step 10: Remove items with voice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-highlight-items/">Step 11: Highlight named items</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-checkout-context/">Step 12: Add the checkout context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-time/">Step 13: Get the delivery time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-comment/">Step 14: Capture a comment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-populate-fields/">Step 15: Populate fields with the delivery details</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-api-call/">Step 16: Make an API call to get ingredients</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-visual-context/">Step 17: Get the app visual context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-balance/">Step 18: Get the balance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-start-dialog/">Step 19: Let Alan start the dialog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-popup/">Step 20: Show a popup next to the Alan button</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../list/using-dynamic-slots/">Using dynamic slots in patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../list/making-web-api-call/">Making a Web API call from the dialog script</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../web/frameworks-list/">Web frameworks</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label for="toctree-checkbox-22"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../web/integrating-react-app/">Building a voice assistant for a React app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web/integrating-angular-app/">Building a voice assistant for an Angular app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web/integrating-vue-app/">Building a voice assistant for a Vue app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web/integrating-ember-app/">Building a voice assistant for an Ember app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web/integrating-electron-app/">Building a voice assistant for an Electron app</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../ios/ios-list/">iOS</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label for="toctree-checkbox-23"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ios/integrating-swift/">Building a voice assistant for an iOS app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ios/navigating-swift/">Navigating between views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ios/sending-data-swift/">Passing the app state to the dialog script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ios/highlighting-swift/">Highlighing items with voice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ios/triggering-info-swift/">Triggering dialog script actions without commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ios/greeting-swift/">Playing a greeting in an app</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../android/android-list/">Android</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/><label for="toctree-checkbox-24"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../android/integrating-java-kotlin/">Building a voice assistant for an Android Java or Kotlin app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../android/navigating-kotlin/">Navigating in an Android app with voice (Kotlin)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../android/sending-state-kotlin/">Passing the app state to the dialog script (Kotlin)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../android/sending-data-kotlin/">Sending data from the app to the dialog script (Kotlin)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../flutter/flutter-list/">Flutter</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/><label for="toctree-checkbox-25"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../flutter/integrating-flutter/">Building a voice assistant for a Flutter app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flutter/navigating-flutter/">Navigating between screens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flutter/sending-data-flutter/">Passing the app state to the dialog script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flutter/project-api-flutter/">Sending data to the dialog script</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../ionic/ionic-list/">Ionic</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/><label for="toctree-checkbox-26"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ionic/integrating-angular/">Building a voice assistant for an Ionic Angular app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ionic/navigating-angular/">Navigating between tabs (Ionic Angular)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ionic/sending-data-angular/">Passing the app state to the dialog script (Ionic Angular)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ionic/integrating-react/">Building a voice assistant for an Ionic React app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ionic/navigating-react/">Navigating between tabs (Ionic React)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../react-native/react-native-list/">React Native</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" type="checkbox"/><label for="toctree-checkbox-27"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../react-native/integrating-react-native/">Building a voice assistant for a React Native app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../react-native/sending-commands-react-native/">Sending commands to the app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../react-native/sending-state-react-native/">Passing the app state to the dialog script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../react-native/triggering-activities-react-native/">Triggering activities without voice commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../react-native/navigating-react-native/">Navigating between screens with voice</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../usage/examples/github/">App showcase</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" type="checkbox"/><label for="toctree-checkbox-28"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../usage/examples/appointment-app/">Appointment scheduling app (React)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/examples/shrine-app/">Shrine e-commerce app (Flutter)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/examples/food-delivery-ionic/">Food delivery app (Ionic)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/examples/order-drinks-app/">Order drinks app (Angular)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/additional/faq/">FAQ</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../usage/examples/overview/">Alan AI examples</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" type="checkbox"/><label for="toctree-checkbox-29"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../usage/examples/predefined-examples/">Dialog script examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/examples/code/">Integration code examples</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../usage/additional/guidelines/overview/">Multimodal conversations design guide</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" type="checkbox"/><label for="toctree-checkbox-30"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../usage/additional/guidelines/planning/">Planning and drafting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/additional/guidelines/building/">Building the dialog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/additional/guidelines/testing/">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/additional/guidelines/publishing/">Preparing for rollout and releasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/additional/guidelines/analyzing/">Analyzing users' behavior</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/additional/cheatsheet/">Alan AI cheat sheet</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div id="orange-background"></div>
<div id="how-to"></div><div class="section" id="how-tos">
<h1>How-Tos<a class="headerlink" href="#how-tos" title="Permalink to this headline">¶</a></h1>
<p>Here you can find answers to the most common questions that you may have when building an AI assistant with Alan AI.</p>
<div class="section" id="dialog-script">
<h2>Dialog script<a class="headerlink" href="#dialog-script" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-to-capture-the-entire-user-input">
<h3><span class="hidden">How to capture the entire user input</span><a class="headerlink" href="#how-to-capture-the-entire-user-input" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to capture the entire user input<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you need to get the entire utterance from the user input, you can use a <a class="reference internal" href="../../server-api/regex-slots/"><span class="doc">greedy RegEx syntax</span></a> in a slot, for example: <code class="docutils literal notranslate"><span class="pre">"$(I*</span> <span class="pre">.+)"</span></code>. Such a RegEx pattern matches any string with one or more characters.</p>
<p class="card-text">Consider the following example: you need to get the user feedback and send this information to your app. You can add the following command to the dialog script:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s2">"I want to give feedback"</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"Thank you! What do you think about our product?"</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nv">feedback = </span><span class="k">await</span> <span class="k k-Alan">p.</span><span class="nx">then</span><span class="p">(</span><span class="nx">userInput</span><span class="p">);</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">({</span><span class="nv">command: </span><span class="s2">"feedback"</span><span class="p">,</span> <span class="nv">value: </span><span class="nx">feedback</span><span class="p">});</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Your feedback is: </span><span class="si">${</span><span class="nx">feedback</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nv">userInput = </span><span class="kp">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kp">intent</span><span class="p">(</span><span class="s2">"$(I* .+)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="k k-Alan">p.</span><span class="nx">resolve</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">I</span><span class="p">));</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<p class="card-text">Here, after the user says: <code class="docutils literal notranslate"><span class="pre">I</span> <span class="pre">want</span> <span class="pre">to</span> <span class="pre">give</span> <span class="pre">feedback</span></code>, the AI assistant offers the user to share it, activates the <code class="docutils literal notranslate"><span class="pre">userInput</span></code> context and stops the script execution until the feedback is received. The user utterance (any type of it) is captured by <code class="docutils literal notranslate"><span class="pre">"$(I*</span> <span class="pre">.+)"</span></code> added to the intent in the context. Alan AI exits it the context, sends the command with the feedback information to the app and plays the feedback to the user.</p>
</div>
</details></div>
<div class="section" id="how-to-create-slots-with-item-names-from-arrays">
<h3><span class="hidden">How to create slots with item names from arrays</span><a class="headerlink" href="#how-to-create-slots-with-item-names-from-arrays" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to create slots with item names from arrays<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">When designing a dialog for an AI assistant, you may want to let the user name items listed in an array when a voice or text command is given. To achieve this, you can create a slot with item names and use this slot in the command pattern. For example:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nv">menuItems = </span><span class="p">[</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Cheese Burger"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">8.99</span><span class="p">},</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Double Cheese Burger"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">12.00</span><span class="p">},</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Bacon Burger"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">11.50</span><span class="p">},</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Hawaian Burger"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">9.99</span><span class="p">},</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Mexican Spicy Burger"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">12.50</span><span class="p">},</span>
<span class="p">];</span>

<span class="c1">// Creates a list of items to be used in a slot: Cheese Burger~Cheese Burger|Double Cheese Burger~Double Cheese Burger|Bacon Burger~Bacon Burger|Hawaian Burger~Hawaian Burger|Mexican Spicy Burger~Mexican Spicy Burger</span>
<span class="kd">const</span> <span class="nv">menuItemsPattern = </span><span class="nx">menuItems</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="p">=&gt;</span> <span class="sb">`</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">~</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">);</span>

<span class="kp">intent</span><span class="p">(</span>
    <span class="sb">`How much (is|does) (a|the|) $(MENU_ITEM~ </span><span class="si">${</span><span class="nx">menuItemsPattern</span><span class="si">}</span><span class="sb">) (cost|)`</span><span class="p">,</span>
    <span class="sb">`What is the (price|cost) (on|for|of) (a|the|) $(MENU_ITEM~ </span><span class="si">${</span><span class="nx">menuItemsPattern</span><span class="si">}</span><span class="sb">)`</span><span class="p">,</span>
    <span class="sb">`How much (is|does) (a|the|) $(UNAVAILABLE_ITEM* .+) (cost|)`</span><span class="p">,</span>
    <span class="sb">`What is the (price|cost) (on|for|of) (a|the|) $(UNAVAILABLE_ITEM* .+)`</span><span class="p">,</span>
    <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">UNAVAILABLE_ITEM</span><span class="p">)</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">UNAVAILABLE_ITEM</span><span class="p">.</span><span class="nx">value</span><span class="si">}</span><span class="sb"> is unavailable`</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nv">requestedItem = </span><span class="k k-Alan">p.</span><span class="nx">MENU_ITEM</span><span class="p">.</span><span class="nx">label</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
            <span class="kd">const</span> <span class="nv">itemOnMenu = </span><span class="nx">menuItems</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">m</span> <span class="p">=&gt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="nx">requestedItem</span><span class="p">));</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">requestedItem</span><span class="si">}</span><span class="sb"> costs $</span><span class="si">${</span><span class="nx">itemOnMenu</span><span class="p">.</span><span class="nx">price</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<p class="card-text">In the example above, we are using a <a class="reference internal" href="../../server-api/user-defined-slots/#slots-with-fuzzy-matching"><span class="std std-ref">slot with fuzzy matching</span></a> to capture the item name. Each item name in the slot is accompanied with the label. Now, thanks to fuzzy matching, Alan AI can capture different variants of item names, even if they are close but not exact:</p>
<ul class="simple">
<li><p class="card-text"><code class="docutils literal notranslate"><span class="pre">How</span> <span class="pre">much</span> <span class="pre">does</span> <span class="pre">Double</span> <span class="pre">Cheese</span> <span class="pre">cost?</span></code></p></li>
<li><p class="card-text"><code class="docutils literal notranslate"><span class="pre">How</span> <span class="pre">much</span> <span class="pre">does</span> <span class="pre">Double</span> <span class="pre">Cheese</span> <span class="pre">Burger</span> <span class="pre">cost?</span></code></p></li>
</ul>
<p class="card-text">When such a pattern is matched, the <code class="docutils literal notranslate"><span class="pre">value</span></code> field of the <code class="docutils literal notranslate"><span class="pre">MENU_ITEM</span></code> slot will contain the user input, and the <code class="docutils literal notranslate"><span class="pre">.label</span></code> field will contain the item name provided in the label. In this voice or text command, <code class="docutils literal notranslate"><span class="pre">p.MENU_ITEM.label</span></code> is used to tell about the item price.</p>
<p class="card-text">To capture any name of the item that is not on the menu, we are using <a class="reference internal" href="../../server-api/regex-slots/"><span class="doc">RegEx</span></a> for the <code class="docutils literal notranslate"><span class="pre">UNAVAILABLE_ITEM</span></code> slot.</p>
</div>
</details></div>
<div class="section" id="how-to-run-a-query-with-words-from-the-user-input">
<h3><span class="hidden">How to run a query with words from the user input</span><a class="headerlink" href="#how-to-run-a-query-with-words-from-the-user-input" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to run a query with words from the user input<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you need to run a query with user’s words, you can add a slot with a <a class="reference internal" href="../../server-api/regex-slots/"><span class="doc">greedy RegEx syntax</span></a> to the command pattern to capture the user’s input.</p>
<p class="card-text">In the example below, when the user asks to translate a word or phrase, Alan AI captures this word or phrase with a greedy RegEx, makes an API call to an external translation service and plays the result with the Italian accent: <code class="docutils literal notranslate"><span class="pre">p.play(voice('it'),</span> <span class="pre">response.translated)</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'(How|) (do you|would you|to|) say $(W* .+)?'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">translate</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="k k-Alan">p.</span><span class="nx">W</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="p">})</span>

<span class="kd">function</span> <span class="nx">translate</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">apiCall</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="s1">'translate'</span><span class="p">,</span> <span class="p">{</span><span class="nv">text: </span><span class="nx">text</span><span class="p">,</span> <span class="nv">srcLang: </span><span class="s1">'en'</span><span class="p">,</span> <span class="nv">dstLang: </span><span class="s1">'it'</span><span class="p">},</span> <span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="kp">voice</span><span class="p">(</span><span class="s1">'it'</span><span class="p">),</span> <span class="nx">response</span><span class="p">.</span><span class="nx">translated</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">apiCall</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">command</span><span class="p">,</span> <span class="nx">param</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">jsp = </span><span class="p">{</span>
        <span class="nv">url: </span><span class="s2">"https://studio.alan.app/api_playground/"</span> <span class="o">+</span> <span class="nx">command</span><span class="p">,</span>
        <span class="nv">strictSSL: </span><span class="kc">false</span><span class="p">,</span>
        <span class="nv">method: </span><span class="s1">'POST'</span><span class="p">,</span>
        <span class="nv">json: </span><span class="nx">param</span><span class="p">,</span>
        <span class="nv">timeout: </span><span class="mf">3000</span><span class="p">,</span>
    <span class="p">};</span>
    <span class="nx">api</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">jsp</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span> <span class="o">||</span> <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">!==</span> <span class="mf">200</span><span class="p">)</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'(Sorry|) something went wrong (with the server|)'</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">callback</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-use-predefined-slots">
<h3><span class="hidden">How to use predefined slots</span><a class="headerlink" href="#how-to-use-predefined-slots" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to use predefined slots<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you need to capture specific values from the user input, for example, dates or numbers, you can add <a class="reference internal" href="../../server-api/predefined-slots/"><span class="doc">predefined slots</span></a> to voice or text commands:</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="sb">`I have a meeting with $(NAME) from $(ORG) $(DATE) (at|) $(TIME) (in|at|near|) $(LOC)`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Adding to your schedule: Meeting </span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">NAME</span><span class="si">}</span><span class="sb"> from </span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">ORG</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">DATE</span><span class="si">}</span><span class="sb"> at </span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">TIME</span><span class="si">}</span><span class="sb"> in the </span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">LOC</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-get-the-right-answer-from-the-user">
<h3><span class="hidden">How to get the right answer from the user</span><a class="headerlink" href="#how-to-get-the-right-answer-from-the-user" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to get the right answer from the user<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">In some cases, the user’s answer may be not precise. As a result, you will not be able to get from the user input the data you need for the subsequent dialog flow. To get the necessary information, you can use an <a class="reference internal" href="../../server-api/contexts/#using-async-contexts"><span class="std std-ref">async context</span></a> in the dialog script.</p>
<p class="card-text">Consider the following example: you need to get the coffee type from the user input, but instead the user just says: <code class="docutils literal notranslate"><span class="pre">I</span> <span class="pre">want</span> <span class="pre">a</span> <span class="pre">coffee</span></code>. You can add the following command to the dialog script:</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s2">"I want a coffee"</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"What coffee do you prefer?"</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nv">coffee = </span><span class="k">await</span> <span class="k k-Alan">p.</span><span class="nx">then</span><span class="p">(</span><span class="nx">whatCoffee</span><span class="p">);</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Your </span><span class="si">${</span><span class="nx">coffee</span><span class="si">}</span><span class="sb"> coffee will be ready in a moment`</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nv">whatCoffee = </span><span class="kp">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
   <span class="kp">intent</span><span class="p">(</span><span class="s2">"$(COFFEE Black|Americano|Latte|Cappuccino|Expresso|Macchiato)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="k k-Alan">p.</span><span class="nx">resolve</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">COFFEE</span><span class="p">));</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<p class="card-text">Here, once you receive an answer that should be more specific, the AI assistant plays: <code class="docutils literal notranslate"><span class="pre">What</span> <span class="pre">coffee</span> <span class="pre">do</span> <span class="pre">you</span> <span class="pre">prefer?</span></code>, activates the <code class="docutils literal notranslate"><span class="pre">whatCoffee</span></code> context and stops the script execution until the user gives the necessary answer. If the user answer matches one of the values listed in the <code class="docutils literal notranslate"><span class="pre">COFFEE</span></code> <a class="reference internal" href="../../server-api/slots/"><span class="doc">slot</span></a>, Alan AI exits the context, and the coffee type is returned. The AI assistant then plays: <code class="docutils literal notranslate"><span class="pre">Your</span> <span class="pre">${coffee}</span> <span class="pre">coffee</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">ready</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">moment</span></code> with the coffee type obtained.</p>
</div>
</details></div>
<div class="section" id="how-to-handle-unexpected-voice-or-text-commands-from-the-user">
<h3><span class="hidden">How to handle unexpected voice or text commands from the user</span><a class="headerlink" href="#how-to-handle-unexpected-voice-or-text-commands-from-the-user" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to handle unexpected voice or text commands from the user<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">The user may give an answer of the type inappropriate for you. In this case, you can lock the user in the context with the <a class="reference internal" href="../../server-api/error-handling/"><span class="doc">fallback()</span></a> function until the necessary user input is received.</p>
<p class="card-text">Consider the following example: a dialog script for a simple math checker offers the user to add two random numbers.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s2">"Check my math"</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nv">a = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mf">10</span><span class="p">)</span>
    <span class="kd">const</span> <span class="nv">b = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mf">10</span><span class="p">)</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`How much </span><span class="si">${</span><span class="nx">a</span><span class="si">}</span><span class="sb"> plus </span><span class="si">${</span><span class="nx">b</span><span class="si">}</span><span class="sb">?`</span><span class="p">)</span>
    <span class="kd">const</span> <span class="nv">sum = </span><span class="k">await</span> <span class="k k-Alan">p.</span><span class="nx">then</span><span class="p">(</span><span class="nx">getNumber</span><span class="p">)</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Your answer </span><span class="si">${</span><span class="nx">sum</span><span class="si">}</span><span class="sb"> is </span><span class="si">${</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="o">==</span><span class="nx">sum</span><span class="o">?</span> <span class="s1">'correct'</span><span class="o">:</span> <span class="s1">'incorrect'</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nv">getNumber = </span><span class="kp">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kp">intent</span><span class="p">(</span><span class="s2">"$(NUMBER)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="k k-Alan">p.</span><span class="nx">resolve</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">NUMBER</span><span class="p">.</span><span class="nx">number</span><span class="p">))</span>

    <span class="kp">fallback</span><span class="p">(</span><span class="s2">"You have to say a number"</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<p class="card-text">Here, after the AI assistant asks a question, it activates the <code class="docutils literal notranslate"><span class="pre">getNumber</span></code> context and stops the script execution until the answer of the appropriate type is received. The answer must be captured by the <a class="reference internal" href="../../server-api/predefined-slots/#number"><span class="std std-ref">NUMBER</span></a> predefined slot: in this case, the AI assistant exits it the context, and the user answer is returned. If the answer is of any other type, the user remains in the context. To instruct the user on the rules, the AI assistant plays: <code class="docutils literal notranslate"><span class="pre">You</span> <span class="pre">have</span> <span class="pre">to</span> <span class="pre">say</span> <span class="pre">a</span> <span class="pre">number</span></code>.</p>
</div>
</details></div>
<div class="section" id="how-to-allow-adding-comments-with-voice-and-text-commands">
<h3><span class="hidden">How to allow adding comments with voice and text commands</span><a class="headerlink" href="#how-to-allow-adding-comments-with-voice-and-text-commands" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to allow adding comments with voice and text commands<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you want to let users add comments, you can use the following command:</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nv">commentContext = </span><span class="kp">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kp">intent</span><span class="p">(</span><span class="sb">`$(I* (.+))`</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="k k-Alan">p.</span><span class="nx">resolve</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">I</span><span class="p">))</span>
<span class="p">});</span>

<span class="kp">intent</span><span class="p">(</span><span class="sb">`(Add a comment|Comment|Add comment)`</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span><span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"Okay, what comment would you like to add?"</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nv">comment = </span><span class="k">await</span> <span class="k k-Alan">p.</span><span class="nx">then</span><span class="p">(</span><span class="nx">commentContext</span><span class="p">);</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Your comment is: </span><span class="si">${</span><span class="nx">comment</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<p class="card-text">Here, after the user says: <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">a</span> <span class="pre">comment</span></code>, the AI assistant plays: <code class="docutils literal notranslate"><span class="pre">Okay,</span> <span class="pre">what</span> <span class="pre">comment</span> <span class="pre">would</span> <span class="pre">you</span> <span class="pre">like</span> <span class="pre">to</span> <span class="pre">add?</span></code>, activates the <code class="docutils literal notranslate"><span class="pre">commentContext</span></code> context and stops the script execution until a comment is received. The comment is captured with the <code class="docutils literal notranslate"><span class="pre">$(I*</span> <span class="pre">(.+))</span></code> RegEx expression added to the intent in the context. The comment is then played to the user.</p>
</div>
</details></div>
<div class="section" id="how-to-iterate-over-a-list-of-objects-back-and-forward">
<h3><span class="hidden">How to iterate over a list of objects (back and forward)</span><a class="headerlink" href="#how-to-iterate-over-a-list-of-objects-back-and-forward" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to iterate over a list of objects (back and forward)<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">You may need to add a command that will allow the user to iterate over a list of objects. This can be the case, for example, if you are building an AI assistant for a shopping or ordering app and want the user to pick something from the products list.</p>
<p class="card-text">Consider the following example: you want your assistant to name all available fruits, allow the user to pick some and save them to the user’s favorites list.</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nv">fruits = </span><span class="p">[</span><span class="s2">"apple"</span><span class="p">,</span> <span class="s2">"orange"</span><span class="p">,</span> <span class="s2">"lemon"</span><span class="p">,</span> <span class="s2">"mango"</span><span class="p">,</span> <span class="s2">"banana"</span><span class="p">,</span> <span class="s2">"avocado"</span><span class="p">,</span> <span class="s2">"kiwi"</span><span class="p">]</span>

<span class="kp">intent</span><span class="p">(</span><span class="s2">"(I want to|) (select|choose) fruits"</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"Iterate over the list of fruits and select your favorite one. To select fruit say 'select', say 'forward' or 'back' to traverse over the list"</span><span class="p">);</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"Say 'finish' to complete your choice"</span><span class="p">)</span>
    <span class="k k-Alan">p.</span><span class="nv">userData.favorite = </span><span class="p">[]</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`We have </span><span class="si">${</span><span class="nx">fruits</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> fruit in our list. First is </span><span class="si">${</span><span class="nx">fruits</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
    <span class="k">await</span> <span class="k k-Alan">p.</span><span class="nx">then</span><span class="p">(</span><span class="nx">selectFruits</span><span class="p">,</span> <span class="p">{</span><span class="nv">state: </span><span class="p">{</span> <span class="nv">index : </span><span class="mf">0</span><span class="p">}})</span>
    <span class="k">if</span> <span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorite</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Your favorite fruits are: </span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorite</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">", "</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`You have not chosen any fruit`</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nv">selectFruits = </span><span class="kp">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kp">intent</span><span class="p">(</span><span class="s2">"(select|choice)"</span><span class="p">,</span>  <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">selected = </span><span class="kc">false</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k k-Alan">p.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorite</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">fruits</span><span class="p">[</span><span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">]))</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorite</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">fruits</span><span class="p">[</span><span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">])</span>
        <span class="p">}</span>
        <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="nx">fruits</span><span class="p">[</span><span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" is selected"</span><span class="p">)</span>
        <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorite</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="kp">intent</span><span class="p">(</span><span class="s2">"(repeat|say again)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="nx">playFruit</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">))</span>

    <span class="kp">intent</span><span class="p">(</span><span class="s2">"(forward|next)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">fruits</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="o">++</span><span class="p">;</span>
            <span class="nx">playFruit</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"It's the last fruit in the list"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">})</span>

    <span class="kp">intent</span><span class="p">(</span><span class="s2">"(back|previous)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="o">--</span><span class="p">;</span>
            <span class="nx">playFruit</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"It's the first fruit in the list"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">})</span>

    <span class="kp">intent</span><span class="p">(</span><span class="s2">"(finish|stop|it's all)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="k k-Alan">p.</span><span class="nx">resolve</span><span class="p">())</span>

    <span class="kp">fallback</span><span class="p">(</span><span class="s2">"Say select to choose fruit, say forward or back to navigate through the list or say 'finish' to return"</span><span class="p">)</span>
<span class="p">})</span>

<span class="kd">const</span> <span class="nv">playFruit = </span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Fruit number </span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="o">+</span><span class="mf">1</span><span class="si">}</span><span class="sb"> is </span><span class="si">${</span><span class="nx">fruits</span><span class="p">[</span><span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p class="card-text">Here, the list of fruits is first saved to the <code class="docutils literal notranslate"><span class="pre">fruits</span></code> array. When the user says: <code class="docutils literal notranslate"><span class="pre">I</span> <span class="pre">want</span> <span class="pre">fruits</span></code>, the AI assistant gives some instructions on how to pick fruits, names the first fruit in the list and activates the <code class="docutils literal notranslate"><span class="pre">selectFruit</span></code> context. The dialog script execution stops until the user makes his or her choice and exits the <code class="docutils literal notranslate"><span class="pre">selectFruit</span></code> context by saying: <code class="docutils literal notranslate"><span class="pre">Finish|Stop|It's</span> <span class="pre">all</span></code>.</p>
<p class="card-text">In the <code class="docutils literal notranslate"><span class="pre">selectFruit</span></code> context, the user can select the named fruit, go forward or back with commands and tell the AI assistant to stop iterating over the list. In the latter case, Alan AI exits the context, and we get back to executing the script in the initial command.</p>
<p class="card-text">The context also has the <a class="reference internal" href="../../server-api/error-handling/"><span class="doc">fallback()</span></a> function to lock the user if the necessary answer is not given.</p>
<p class="card-text">To iterate over the list of fruits, the following Alan AI objects and variables are added to the script:</p>
<ul class="simple">
<li><p class="card-text"><a class="reference internal" href="../../server-api/objects/#userdata"><span class="std std-ref">userData</span></a>: this variable can be used to store data that can be accessed between contexts. In this example, the user choice is saved to the <code class="docutils literal notranslate"><span class="pre">p.userData.favorites</span></code> array in the <code class="docutils literal notranslate"><span class="pre">selectFruit</span></code> context. The resulting list is played to the user after the user exits the context.</p></li>
<li><p class="card-text"><a class="reference internal" href="../../server-api/objects/#state"><span class="std std-ref">state</span></a>: this is a special object that сan be used as a ‘dictionary’. In this example, the <code class="docutils literal notranslate"><span class="pre">state</span></code> object stores the index of the current element in the fruits array. When the context is activated, the index is set to 0, and the <code class="docutils literal notranslate"><span class="pre">state</span></code> object is passed to the context. With each new step forward or backward in the context, the index is incremented or decremented.</p></li>
</ul>
</div>
</details></div>
<div class="section" id="how-to-sort-items-by-price-name-or-category">
<h3><span class="hidden">How to sort items by price, name or category</span><a class="headerlink" href="#how-to-sort-items-by-price-name-or-category" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to sort items by price, name or category<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you are working with the item list, it is always a good idea provide the user with the ability to sort items by price, name or category. You can do it in the following way:</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id13" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nv">menuItems = </span><span class="p">[</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Cheese Burger"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">8.99</span><span class="p">,</span> <span class="nv">category: </span><span class="s1">'burger'</span><span class="p">},</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Double Cheese Burger"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">12.00</span><span class="p">,</span> <span class="nv">category: </span><span class="s1">'burger'</span><span class="p">},</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Bacon Burger"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">11.50</span><span class="p">,</span> <span class="nv">category: </span><span class="s1">'burger'</span><span class="p">},</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Hawaian Burger"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">9.99</span><span class="p">,</span> <span class="nv">category: </span><span class="s1">'burger'</span><span class="p">},</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Mexican Spicy Burger"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">12.50</span><span class="p">,</span> <span class="nv">category: </span><span class="s1">'burger'</span><span class="p">},</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Ceaser Salad"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">12.50</span><span class="p">,</span> <span class="nv">category: </span><span class="s1">'salad'</span><span class="p">},</span>
    <span class="p">{</span><span class="nv">name: </span><span class="s2">"Garden Salad"</span><span class="p">,</span> <span class="nv">price: </span><span class="mf">9.99</span><span class="p">,</span> <span class="nv">category: </span><span class="s1">'salad'</span><span class="p">}</span>
<span class="p">];</span>

<span class="kp">intent</span><span class="p">(</span>
    <span class="s1">'(order|sort) by $(ORDER_BY name|price|category)'</span><span class="p">,</span>
    <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nv">orderBy = </span><span class="k k-Alan">p.</span><span class="nx">ORDER_BY</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nv">orderedMenuItems = </span><span class="nx">menuItems</span><span class="p">;</span>
        <span class="k">switch</span><span class="p">(</span><span class="nx">orderBy</span><span class="p">){</span>
            <span class="k">case</span> <span class="s1">'name'</span><span class="o">:</span>
                <span class="nv">orderedMenuItems = </span><span class="nx">menuItems</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="k k-Alan">p1</span><span class="p">,</span> <span class="k k-Alan">p2</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k k-Alan">p1</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="k k-Alan">p2</span><span class="p">.</span><span class="nx">name</span><span class="p">));</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s1">'price'</span><span class="o">:</span>
                <span class="nv">orderedMenuItems = </span><span class="nx">menuItems</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="k k-Alan">p1</span><span class="p">,</span> <span class="k k-Alan">p2</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k k-Alan">p1</span><span class="p">.</span><span class="nx">price</span> <span class="o">-</span> <span class="k k-Alan">p2</span><span class="p">.</span><span class="nx">price</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s1">'category'</span><span class="o">:</span>
                <span class="nv">orderedMenuItems = </span><span class="nx">menuItems</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="k k-Alan">p1</span><span class="p">,</span> <span class="k k-Alan">p2</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k k-Alan">p1</span><span class="p">.</span><span class="nx">category</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="k k-Alan">p2</span><span class="p">.</span><span class="nx">category</span><span class="p">));</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">({</span><span class="nv">command: </span><span class="s1">'getMenu'</span><span class="p">,</span> <span class="nv">data: </span><span class="nx">orderedMenuItems</span><span class="p">});</span>
        <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Here are the items ordered by </span><span class="si">${</span><span class="nx">orderBy</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">orderedMenuItems</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-pass-information-to-the-context">
<h3><span class="hidden">How to pass information to the context</span><a class="headerlink" href="#how-to-pass-information-to-the-context" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to pass information to the context<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you need to pass some information to the context, you can use the <a class="reference internal" href="../../server-api/objects/#state"><span class="std std-ref">state</span></a> object. <code class="docutils literal notranslate"><span class="pre">state</span></code> is a kind of ‘dictionary’ where you can store any data you want.</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id14" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s2">"I have friends"</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"How many friends do you have?"</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nv">number = </span><span class="k">await</span> <span class="k k-Alan">p.</span><span class="nx">then</span><span class="p">(</span><span class="nx">numberContext</span><span class="p">)</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"What is your friend's name number one?"</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nv">index = </span><span class="mf">0</span><span class="p">,</span> <span class="nv">friends = </span><span class="p">[];</span>
    <span class="kd">let</span> <span class="nv">list = </span><span class="k">await</span> <span class="k k-Alan">p.</span><span class="nx">then</span><span class="p">(</span><span class="nx">friendsContext</span><span class="p">,</span> <span class="p">{</span><span class="nv">state: </span><span class="p">{</span><span class="nx">number</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">friends</span><span class="p">}})</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">({</span><span class="nv">command: </span><span class="s2">"friends"</span><span class="p">,</span> <span class="nx">list</span><span class="p">})</span>
<span class="p">})</span>

<span class="kd">const</span> <span class="nv">friendsContext = </span><span class="kp">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kp">intent</span><span class="p">(</span><span class="s2">"$(NAME)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="p">{</span><span class="nx">number</span><span class="p">,</span> <span class="nx">friends</span><span class="p">}</span> <span class="o">=</span> <span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">;</span>
        <span class="nx">friends</span><span class="p">[</span><span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="k k-Alan">p.</span><span class="nx">NAME</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span> <span class="o">==</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">friends</span><span class="p">)</span>
        <span class="p">}</span><span class="k">else</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`What is your friend's name number </span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="o">+</span><span class="mf">1</span><span class="si">}</span><span class="sb">?`</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="p">})</span>

<span class="kd">const</span> <span class="nv">numberContext = </span><span class="kp">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kp">intent</span><span class="p">(</span><span class="s2">"$(NUMBER)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">NUMBER</span><span class="p">.</span><span class="nx">number</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">resolve</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">NUMBER</span><span class="p">.</span><span class="nx">number</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"The number of friends must be one or more"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<p class="card-text">In the example above, the AI assistant gets the number of friends the user has and the friends’ names. Here we have a command: <code class="docutils literal notranslate"><span class="pre">I</span> <span class="pre">have</span> <span class="pre">friends</span></code>, and two contexts that are activated from it:</p>
<ul class="simple">
<li><p class="card-text"><code class="docutils literal notranslate"><span class="pre">numberContext</span></code> to get the number of friends from the user input</p></li>
<li><p class="card-text"><code class="docutils literal notranslate"><span class="pre">friendsContext</span></code> to create a list of friends the user has</p></li>
</ul>
<p class="card-text">When we activate the <code class="docutils literal notranslate"><span class="pre">friendsContext</span></code>, we are passing the following <code class="docutils literal notranslate"><span class="pre">state</span></code> object to it: <code class="docutils literal notranslate"><span class="pre">{state:</span> <span class="pre">{number,</span> <span class="pre">index,</span> <span class="pre">friends}}</span></code>.
<code class="docutils literal notranslate"><span class="pre">number</span></code> stands for the number of friends retrieved from the user input, <code class="docutils literal notranslate"><span class="pre">index</span></code> is used for iterating over the friends’ array and <code class="docutils literal notranslate"><span class="pre">friends</span></code> contains the list of friends. Once the number of friends in the array is equal to the number of friends defined in the user input, Alan AI exits the context, and a command with the list of friends is sent to the app.</p>
</div>
</details></div>
<div class="section" id="how-to-use-voice-and-text-commands-with-fuzzy-parameters">
<h3><span class="hidden">How to use voice and text commands with fuzzy parameters</span><a class="headerlink" href="#how-to-use-voice-and-text-commands-with-fuzzy-parameters" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to use voice and text commands with fuzzy parameters<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you want Alan AI to recognize users’ commands that are close to those added to the dialog script but are not 100% matching, you can use <a class="reference internal" href="../../server-api/user-defined-slots/#slots-with-fuzzy-matching"><span class="std std-ref">slots with fuzzy matching</span></a>. Add <code class="docutils literal notranslate"><span class="pre">~</span></code> after the slot name and define labels for each slot value.</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id15" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nv">array = </span><span class="p">[</span><span class="s2">"small"</span><span class="p">,</span> <span class="s2">"medium"</span><span class="p">,</span> <span class="s2">"large"</span><span class="p">];</span>
<span class="kp">intent</span><span class="p">(</span><span class="sb">`$(ORD~ one~1|first~1|two~2|second~2|middle~2|three~3|third~3|last~3)`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// one is value, 1 is label</span>
    <span class="kd">let</span> <span class="nv">index = </span><span class="nb">parseInt</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">ORD</span><span class="p">.</span><span class="nx">label</span><span class="p">);</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`You've selected </span><span class="si">${</span><span class="nx">array</span><span class="p">[</span><span class="nx">index</span><span class="o">-</span><span class="mf">1</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<p class="card-text">In the example above, the <code class="docutils literal notranslate"><span class="pre">ORD</span></code> slot labels are used as indices for values in <code class="docutils literal notranslate"><span class="pre">array</span></code>. In the Debugging Chat, try typing <code class="docutils literal notranslate"><span class="pre">one</span></code>, <code class="docutils literal notranslate"><span class="pre">two</span></code> or <code class="docutils literal notranslate"><span class="pre">last</span></code>. The AI assistant will reply with a corresponding value from <code class="docutils literal notranslate"><span class="pre">array</span></code>. Then try making a slight mistake, for example, <code class="docutils literal notranslate"><span class="pre">thrird</span></code>. Alan AI will still be able to match the intent.</p>
</div>
</details></div>
<div class="section" id="how-to-use-several-slots-of-the-same-type-in-one-intent">
<h3><span class="hidden">How to use several slots of the same type in one intent</span><a class="headerlink" href="#how-to-use-several-slots-of-the-same-type-in-one-intent" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to use several slots of the same type in one intent<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">You can add a slot of the same type to one intent several times. In this case, all slot values will be collected in an array with the following name: <code class="docutils literal notranslate"><span class="pre">SLOTNAME+s</span></code>, for example, <code class="docutils literal notranslate"><span class="pre">ITEMs</span></code>.</p>
<p class="card-text">For example, if you have several slots named <code class="docutils literal notranslate"><span class="pre">ITEM</span></code>, you can access the <code class="docutils literal notranslate"><span class="pre">ITEMs</span></code> object with an array of size 2 and you can reference the first item as <code class="docutils literal notranslate"><span class="pre">ITEMs[0]</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id16" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nv">items = </span><span class="p">[</span><span class="s2">"burger"</span><span class="p">,</span> <span class="s2">"cola"</span><span class="p">,</span> <span class="s2">"taco"</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">);</span>
<span class="kp">intent</span><span class="p">(</span><span class="sb">`I want $(NUMBER) $(ITEM </span><span class="si">${</span><span class="nx">items</span><span class="si">}</span><span class="sb">) and $(NUMBER) $(ITEM </span><span class="si">${</span><span class="nx">items</span><span class="si">}</span><span class="sb">)`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">order = </span><span class="nx">_</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">NUMBERs</span><span class="p">)),</span> <span class="p">(</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">acc</span><span class="p">[</span><span class="k k-Alan">p.</span><span class="nx">ITEMs</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="k k-Alan">p.</span><span class="nx">NUMBERs</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">number</span><span class="p">;</span> <span class="k">return</span> <span class="nx">acc</span><span class="p">},</span> <span class="p">{});</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">({</span><span class="nv">command: </span><span class="s2">"createOrder"</span><span class="p">,</span> <span class="nx">order</span> <span class="p">});</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-make-alan-ai-use-the-plural-form-for-nouns">
<h3><span class="hidden">How to make Alan AI use the plural form for nouns</span><a class="headerlink" href="#how-to-make-alan-ai-use-the-plural-form-for-nouns" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to make Alan AI use the plural form for nouns<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">To use the pluralizer in Alan AI, add the underscore character (<code class="docutils literal notranslate"><span class="pre">_</span></code>) to the necessary noun in the voice or text command.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p class="card-text">This syntax is not supported for irregular plural nouns.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id17" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s2">"I want $(NUMBER) $(P cake_)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Here you are, </span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">NUMBER</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">P</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-allow-users-to-say-synonyms-for-the-same-thing">
<h3><span class="hidden">How to allow users to say synonyms for the same thing</span><a class="headerlink" href="#how-to-allow-users-to-say-synonyms-for-the-same-thing" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to allow users to say synonyms for the same thing<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">It is often necessary to give the user an opportunity to say the same thing in several ways. For example, a product in the price list can be expressed differently, but we still must recognize which product the user is talking about. For these purposes, you can compile a synonym dictionary for each element and use fuzzy parameters in the voice or text command. Fuzzy parameters make it possible to associate a key with the value that is recognized as the user input.</p>
<p class="card-text">Consider the following example: we are constructing a list of slot values out of a JSON object. <code class="docutils literal notranslate"><span class="pre">aliases</span></code> become slot values and the <code class="docutils literal notranslate"><span class="pre">id</span></code> becomes the label.</p>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id18" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nv">products = </span><span class="p">[</span>
    <span class="p">{</span><span class="nv">id: </span><span class="s2">"cola"</span><span class="p">,</span>  <span class="nv">aliases: </span><span class="p">[</span><span class="s2">"cola"</span><span class="p">,</span><span class="s2">"coca-cola"</span><span class="p">,</span> <span class="s2">"soda"</span><span class="p">,</span> <span class="s2">"coke"</span><span class="p">]},</span>
    <span class="p">{</span><span class="nv">id: </span><span class="s2">"juice"</span><span class="p">,</span> <span class="nv">aliases: </span><span class="p">[</span><span class="s2">"juice"</span><span class="p">,</span> <span class="s2">"fresh"</span><span class="p">,</span> <span class="s2">"orange juice"</span><span class="p">,</span> <span class="s2">"orange fresh"</span><span class="p">]}</span>
<span class="p">]</span>
<span class="c1">// We have to construct following fuzzy parameters with all value~label items concatenated with |</span>
<span class="c1">// cola~cola|cola-cola~cola|soda~cola|coke~cola|juice~juice|fresh~juice|orange juice~juice|orange fresh~juice</span>

<span class="kd">const</span> <span class="nv">PROD_INTENTS = </span><span class="nx">_</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span><span class="nx">products</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">p</span> <span class="p">=&gt;</span> <span class="k k-Alan">p.</span><span class="nx">aliases</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">a</span> <span class="p">=&gt;</span> <span class="sb">`</span><span class="si">${</span><span class="nx">a</span><span class="si">}</span><span class="sb">~</span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">))).</span><span class="nx">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">)</span>

<span class="kp">intent</span><span class="p">(</span><span class="sb">`(I want|give me) $(ITEM </span><span class="si">${</span><span class="nx">PROD_INTENTS</span><span class="si">}</span><span class="sb">)`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`We added </span><span class="si">${</span><span class="k k-Alan">p.</span><span class="nx">ITEM</span><span class="p">.</span><span class="nx">label</span><span class="si">}</span><span class="sb"> to your order`</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<p class="card-text">Here is another example of how to construct a list of slot values out of the JSON object passed with <code class="docutils literal notranslate"><span class="pre">visualState</span></code>. In this example, we are using <a class="reference internal" href="../../server-api/dynamic-slots/"><span class="doc">dynamic slots</span></a> to get the user feedback. The list of slot values is constructed out of the values passed in the <code class="docutils literal notranslate"><span class="pre">synonyms</span></code> key, and the values in the <code class="docutils literal notranslate"><span class="pre">category</span></code> key are used as the label.</p>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id19" title="Permalink to this code">¶</a></div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">//Passed visual state</span>
<span class="p">{</span>
<span class="w">    </span><span class="s2">"answers"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">"category"</span><span class="o">:</span><span class="w"> </span><span class="s2">"positive"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"synonyms"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">"yes"</span><span class="p">,</span>
<span class="w">                </span><span class="s2">"of course"</span><span class="p">,</span>
<span class="w">                </span><span class="s2">"definitely"</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">"category"</span><span class="o">:</span><span class="w"> </span><span class="s2">"negative"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"synonyms"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">"no"</span><span class="p">,</span>
<span class="w">                </span><span class="s2">"in no case"</span><span class="p">,</span>
<span class="w">                </span><span class="s2">"I don't think so"</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">"category"</span><span class="o">:</span><span class="w"> </span><span class="s2">"neutral"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"synonyms"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">"maybe"</span><span class="p">,</span>
<span class="w">                </span><span class="s2">"I'll think about it"</span><span class="p">,</span>
<span class="w">                </span><span class="s2">"I don't know"</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id20" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">onVisualState</span><span class="p">((</span><span class="nx">p</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">answers</span><span class="p">)</span> <span class="p">{</span>
        <span class="k k-Alan">p.</span><span class="kp">visual</span><span class="p">.</span><span class="nv">answersEntity = </span><span class="nx">s</span><span class="p">.</span><span class="nx">answers</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ans</span> <span class="p">=&gt;</span> <span class="o">!</span><span class="nx">ans</span><span class="p">.</span><span class="nx">unique</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">ans</span> <span class="p">=&gt;</span> <span class="nx">ans</span><span class="p">.</span><span class="nx">synonyms</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">syn</span> <span class="p">=&gt;</span> <span class="nx">syn</span> <span class="o">+</span> <span class="s1">'~'</span> <span class="o">+</span> <span class="nx">ans</span><span class="p">.</span><span class="nx">category</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">)).</span><span class="nx">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k k-Alan">p.</span><span class="kp">visual</span><span class="p">.</span><span class="nv">answersEntity = </span><span class="s2">""</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="kp">intent</span><span class="p">(</span><span class="sb">`(My answer is|) $(ANS v:answersEntity)`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">switch</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">ANS</span><span class="p">.</span><span class="nx">label</span><span class="p">){</span>
        <span class="k">case</span> <span class="s2">"positive"</span><span class="o">:</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`That's great!`</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">"negative"</span><span class="o">:</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Sorry to hear that`</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">"neutral"</span><span class="o">:</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Thanks for sharing`</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<p class="card-text">You can also filter intents matching based on the visual state value. For example, this intent will never match if the cart is empty:</p>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id21" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="kp">visual</span><span class="p">(</span><span class="nx">v</span> <span class="p">=&gt;</span> <span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">order</span><span class="p">)),</span> <span class="sb">`(What are|) my order details`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"You have ordered:"</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">product</span> <span class="ow">in</span> <span class="k k-Alan">p.</span><span class="kp">visual</span><span class="p">.</span><span class="nx">order</span><span class="p">)</span> <span class="p">{</span>
       <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="k k-Alan">p.</span><span class="kp">visual</span><span class="p">.</span><span class="nx">order</span><span class="p">[</span><span class="nx">product</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">product</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-ask-the-user-clarifying-questions">
<span id="id1"></span><h3><span class="hidden">How to ask the user clarifying questions</span><a class="headerlink" href="#how-to-ask-the-user-clarifying-questions" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to ask the user clarifying questions<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">When designing a Q&amp;A virtual assistant, you may want it to give exact answers to specific question. However, by default, if the user asks a question that does not exactly match the phrases in intent patterns, Alan AI attempts to automatically find the best match among all intents available in the dialog script. Sometimes this may result in an AI assistant giving close but not accurate answers.</p>
<p class="card-text">To adjust the accuracy of answers, you can use Alan AI’s <a class="reference internal" href="../../server-api/objects/#score"><span class="std std-ref">p.score</span></a> and clarifying questions.</p>
<p class="card-text">In the example below, each question in the <code class="docutils literal notranslate"><span class="pre">project.QnA</span></code> array is grouped with an answer and a clarifying question. The minimum required match score is defined in the <code class="docutils literal notranslate"><span class="pre">scoreMin</span></code> variable. When the user asks a question, there may be two possible outcomes:</p>
<ul class="simple">
<li><p class="card-text">If the user’s utterance exactly matches the phrase in the pattern, the intent match score is greater than or equal to <code class="docutils literal notranslate"><span class="pre">scoreMin</span></code>. The AI assistant plays a response provided in the question block.</p></li>
<li><p class="card-text">If the user’s utterance is close but not exactly matching, the intent match score is less than <code class="docutils literal notranslate"><span class="pre">scoreMin</span></code>. The AI assistant plays a clarifying question and activates the <code class="docutils literal notranslate"><span class="pre">ctxYesNo</span></code> context. If the user agrees to listen to the answer, the response is played.</p></li>
</ul>
<p class="card-text">For example, if the user asks: <code class="docutils literal notranslate"><span class="pre">May</span> <span class="pre">I</span> <span class="pre">pack</span> <span class="pre">food</span> <span class="pre">in</span> <span class="pre">my</span> <span class="pre">bag?</span></code>, the response will be played immediately. If the user asks: <code class="docutils literal notranslate"><span class="pre">May</span> <span class="pre">I</span> <span class="pre">pack</span> <span class="pre">my</span> <span class="pre">belongings</span> <span class="pre">in</span> <span class="pre">my</span> <span class="pre">bag?</span></code>, a clarifying question will be asked first.</p>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id22" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">project</span><span class="p">.</span><span class="nv">QnA = </span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nv">q: </span><span class="p">[</span><span class="s2">"(How early|When) should I (arrive|get) to the airport?"</span><span class="p">],</span>
        <span class="nv">a: </span><span class="p">[</span><span class="s2">"The TSA advises arriving at the airport two hours before your flight for domestic travel and three hours before for international travel."</span><span class="p">],</span>
        <span class="nv">c: </span><span class="s2">"Are you asking about the recommended arrival time?"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nv">q: </span><span class="p">[</span><span class="s2">"May I pack food in (my|the|) (carry-on|) (or|) (checked|) bag?"</span><span class="p">],</span>
        <span class="nv">a: </span><span class="p">[</span><span class="s2">"Yes, you may pack food in your carry-on or checked bag, but remember all food must undergo x-ray screening."</span><span class="p">],</span>
        <span class="nv">c: </span><span class="s2">"Do you want to know about permitted food items?"</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="kd">const</span> <span class="nv">scoreMin = </span><span class="mf">0.99</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">playSample</span><span class="p">(</span><span class="nx">question</span><span class="p">,</span> <span class="nx">answer</span><span class="p">,</span> <span class="nx">clarifyQuestion</span><span class="p">){</span>
    <span class="kp">intent</span><span class="p">(</span><span class="nx">question</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k k-Alan">p.</span><span class="nx">score</span> <span class="o">&gt;=</span> <span class="nx">scoreMin</span><span class="p">)</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">sample</span><span class="p">(</span><span class="nx">answer</span><span class="p">));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`(Let me make it clear|Not sure I got this correctly). </span><span class="si">${</span><span class="nx">clarifyQuestion</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
            <span class="kd">let</span> <span class="nv">userDecision = </span><span class="k">await</span> <span class="k k-Alan">p.</span><span class="nx">then</span><span class="p">(</span><span class="nx">ctxYesNo</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">userDecision</span><span class="p">)</span> <span class="p">{</span>
                <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">sample</span><span class="p">(</span><span class="nx">answer</span><span class="p">));</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'(OK, no problem|Sure|Got it)'</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="p">{</span><span class="nx">q</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">}</span> <span class="k">of</span> <span class="kp">project</span><span class="p">.</span><span class="nx">QnA</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">playSample</span><span class="p">(</span><span class="nx">q</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nv">ctxYesNo = </span><span class="kp">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kp">intent</span><span class="p">(</span><span class="s2">"(Sure|Absolutely|Naturally|Definitely|Of course)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k k-Alan">p.</span><span class="nx">resolve</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>
          <span class="p">);</span>

    <span class="kp">intent</span><span class="p">(</span><span class="s2">"(No|Negative|No way|Never|Not now)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k k-Alan">p.</span><span class="nx">resolve</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span>
          <span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-indicate-meaningful-words-terms-and-names">
<span id="id2"></span><h3><span class="hidden">How to indicate meaningful words, terms and names</span><a class="headerlink" href="#how-to-indicate-meaningful-words-terms-and-names" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to indicate meaningful words, terms and names<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">In patterns, you may have key words, terms and names to which the AI assistant must pay a special attention. To increase the significance of these words and the chances that Alan AI matches the user’s input, instead of regular words or phrases, you can use slots in patterns.</p>
<p class="card-text">In the example below, there are plumber terms that are key in the sentence. Instead of using regular alternatives, we can turn the terms to a slot and add this slot to the pattern. Although the slot values will not be used anywhere further in the script, this will increase the terms recognition.</p>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id23" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'What is $(TERM j-bend|return bend|p-trap|u-bend|s-trap)?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'It is the curved pipe under a sink that keeps sewer gases from entering the home.'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
</details></div>
</div>
<div class="section" id="client-app">
<span id="id3"></span><h2>Client app<a class="headerlink" href="#client-app" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-to-send-commands-to-the-app">
<h3><span class="hidden">How to send commands to the app</span><a class="headerlink" href="#how-to-send-commands-to-the-app" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to send commands to the app<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">To trigger activities in the app with a voice or text command, you need to send commands from the dialog script to the app. Do the following:</p>
<ol class="arabic simple">
<li><p class="card-text">Use the <a class="reference internal" href="../../server-api/commands-and-responses/#play"><span class="std std-ref">play()</span></a> function in the dialog script to send a command to the app.</p></li>
<li><p class="card-text">In the app, add the <a class="reference internal" href="../../client-api/methods/command-handler/"><span class="doc">onCommand handler</span></a> and define what actions must be taken when the command is received.</p></li>
</ol>
<p class="card-text">Let’s assume we want to open the cart when the user says: <code class="docutils literal notranslate"><span class="pre">Go</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">cart</span></code>. To do this, in the dialog script we will add the <code class="docutils literal notranslate"><span class="pre">play()</span></code> function with the command object:</p>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id24" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'(Show|Open|Go) (to|) (the|) cart'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">({</span><span class="nv">command: </span><span class="s1">'showCart'</span><span class="p">});</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'Opening the cart'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<p class="card-text">In the app, we will use the <code class="docutils literal notranslate"><span class="pre">onCommand</span> <span class="pre">handler</span></code> and define the logic for the showCart command in it:</p>
<div class="tabbed-set docutils">
<input checked="checked" id="4ec0d519-ed8a-4427-93fd-2194f9077b7c" name="c852fa39-154d-4ab6-8799-c482fa231144" type="radio"/>
<label class="tabbed-label" for="4ec0d519-ed8a-4427-93fd-2194f9077b7c">
Web (React, Angular, etc.)</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id25" title="Permalink to this code">¶</a></div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">alanBtnInstance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">alanBtn</span><span class="p">({</span>
<span class="w">  </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s2">"YOUR_KEY_FROM_ALAN_STUDIO_HERE"</span><span class="p">,</span>
<span class="w">  </span><span class="nx">onCommand</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">commandData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">commandData</span><span class="p">.</span><span class="nx">command</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"showCart"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// go to the cart here</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">rootEl</span><span class="o">:</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"alan-btn"</span><span class="p">),</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<input id="944b8aa8-674b-491c-bb5e-302a235f8f48" name="c852fa39-154d-4ab6-8799-c482fa231144" type="radio"/>
<label class="tabbed-label" for="944b8aa8-674b-491c-bb5e-302a235f8f48">
Objective-C</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id26">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id26" title="Permalink to this code">¶</a></div>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="nb">self</span><span class="p">.</span><span class="n">button</span><span class="p">.</span><span class="n">onCommand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="bp">NSDictionary</span><span class="w"> </span><span class="o">*</span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="bp">NSString</span><span class="o">*</span><span class="w"> </span><span class="n">commandName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">command</span><span class="w"> </span><span class="n">objectForKey</span><span class="o">:</span><span class="s">@"command"</span><span class="p">];</span>
<span class="w">  </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span><span class="w"> </span><span class="n">commandName</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// if the command is showCart, go the cart here</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<input id="706ca787-b1ab-412d-9aa0-eab61d489c76" name="c852fa39-154d-4ab6-8799-c482fa231144" type="radio"/>
<label class="tabbed-label" for="706ca787-b1ab-412d-9aa0-eab61d489c76">
Swift</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id27">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id27" title="Permalink to this code">¶</a></div>
<div class="highlight-swift notranslate"><div class="highlight"><pre><span></span><span class="kc">self</span><span class="p">.</span><span class="n">button</span><span class="p">.</span><span class="n">onCommand</span> <span class="p">=</span> <span class="p">{</span> <span class="n">command</span> <span class="k">in</span>
  <span class="k">guard</span> <span class="kd">let</span> <span class="nv">commandName</span> <span class="p">=</span> <span class="n">command</span><span class="p">?[</span><span class="s">"command"</span><span class="p">]</span> <span class="k">as</span><span class="p">?</span> <span class="nb">String</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span>
  <span class="p">}</span>
  <span class="bp">print</span><span class="p">(</span><span class="n">commandName</span><span class="p">)</span>
  <span class="c1">// if the command is showCart, go the cart here</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="db08d4dc-ac4c-4fea-83c6-280c2bcafc62" name="c852fa39-154d-4ab6-8799-c482fa231144" type="radio"/>
<label class="tabbed-label" for="db08d4dc-ac4c-4fea-83c6-280c2bcafc62">
Kotlin</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id28">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id28" title="Permalink to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">alanCallback</span><span class="p">:</span><span class="w"> </span><span class="n">AlanCallback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">AlanCallback</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onCommand</span><span class="p">(</span><span class="n">eventCommand</span><span class="p">:</span><span class="w"> </span><span class="n">EventCommand</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eventCommand</span><span class="p">.</span><span class="na">data</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">commandName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getJSONObject</span><span class="p">(</span><span class="s">"data"</span><span class="p">).</span><span class="na">getString</span><span class="p">(</span><span class="s">"command"</span><span class="p">)</span>
<span class="w">      </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"onCommand: commandName: </span><span class="si">$</span><span class="n">commandName</span><span class="s">"</span><span class="p">)</span>
<span class="w">      </span><span class="c1">// if the command is showCart, go the cart here</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">JSONException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">message</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<input id="28a7e2a7-2780-4057-9611-2d768ba0e911" name="c852fa39-154d-4ab6-8799-c482fa231144" type="radio"/>
<label class="tabbed-label" for="28a7e2a7-2780-4057-9611-2d768ba0e911">
Java</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id29">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id29" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">AlanCallback</span><span class="w"> </span><span class="n">alanCallback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AlanCallback</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nd">@Override</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onCommand</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">EventCommand</span><span class="w"> </span><span class="n">eventCommand</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eventCommand</span><span class="p">.</span><span class="na">getData</span><span class="p">();</span>
<span class="w">      </span><span class="n">String</span><span class="w"> </span><span class="n">commandName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="na">getJSONObject</span><span class="p">(</span><span class="s">"data"</span><span class="p">).</span><span class="na">getString</span><span class="p">(</span><span class="s">"command"</span><span class="p">);</span>
<span class="w">      </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"onCommand: commandName: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">commandName</span><span class="p">);</span>
<span class="w">      </span><span class="c1">// if the command is showCart, go the cart here</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">JSONException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<input id="59fecdd1-cf65-45f5-9b52-465f743885a5" name="c852fa39-154d-4ab6-8799-c482fa231144" type="radio"/>
<label class="tabbed-label" for="59fecdd1-cf65-45f5-9b52-465f743885a5">
Flutter</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id30">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id30" title="Permalink to this code">¶</a></div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">_MyHomePageState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">AlanVoice</span><span class="p">.</span><span class="n">onCommand</span><span class="p">.</span><span class="n">add</span><span class="p">((</span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">_handleCommand</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="n">data</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="n">_handleCommand</span><span class="p">(</span><span class="n">Map</span><span class="w"> </span><span class="n">command</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">command</span><span class="p">[</span><span class="s2">"command"</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">"showCart"</span><span class="o">:</span>
<span class="w">      </span><span class="c1">// go to the cart here</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">default</span><span class="o">:</span>
<span class="w">      </span><span class="n">debugPrint</span><span class="p">(</span><span class="s2">"Unknown command: </span><span class="si">${</span><span class="n">command</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="799b3839-ddbf-4892-8e3a-d86eb4780993" name="c852fa39-154d-4ab6-8799-c482fa231144" type="radio"/>
<label class="tabbed-label" for="799b3839-ddbf-4892-8e3a-d86eb4780993">
Ionic</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id31">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id31" title="Permalink to this code">¶</a></div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">this</span><span class="p">.</span><span class="nx">alanBtnComponent</span><span class="p">.</span><span class="nx">nativeElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'command'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">commandData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">).</span><span class="nx">detail</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">commandData</span><span class="p">.</span><span class="nx">command</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'showCart'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// go to the cart here</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<input id="d10e259e-b3e0-48bb-8656-c9da8cc3f74d" name="c852fa39-154d-4ab6-8799-c482fa231144" type="radio"/>
<label class="tabbed-label" for="d10e259e-b3e0-48bb-8656-c9da8cc3f74d">
React Native</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id32">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id32" title="Permalink to this code">¶</a></div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AlanView</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'@alan-ai/alan-sdk-react-native'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NativeEventEmitter</span><span class="p">,</span><span class="w"> </span><span class="nx">NativeModules</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'react-native'</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">AlanManager</span><span class="p">,</span><span class="w"> </span><span class="nx">AlanEventEmitter</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">NativeModules</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">alanEventEmitter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">NativeEventEmitter</span><span class="p">(</span><span class="nx">AlanEventEmitter</span><span class="p">);</span>

<span class="nx">componentDidMount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">/// Handle commands from Alan AI Studio</span>
<span class="w">  </span><span class="nx">alanEventEmitter</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s1">'onCommand'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`onCommand: </span><span class="si">${</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// if the command is showCart, go the cart here</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
<span class="nx">componentWillUnmount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alanEventEmitter</span><span class="p">.</span><span class="nx">removeAllListeners</span><span class="p">(</span><span class="s1">'onCommand'</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-send-data-from-the-dialog-script-to-the-app">
<h3><span class="hidden">How to send data from the dialog script to the app</span><a class="headerlink" href="#how-to-send-data-from-the-dialog-script-to-the-app" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to send data from the dialog script to the app<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">To pass data from the dialog script to the app, in the <a class="reference internal" href="../../server-api/commands-and-responses/#play"><span class="std std-ref">play()</span></a> function, define a JSON object of the command with all the data to be sent.</p>
<p class="card-text">In this example, together with the navigate command, we are sending the route to the page that must be opened when the command is received. The logic for command handling is defined in the onCommand handler as described in the how-to above.</p>
<div class="literal-block-wrapper docutils container" id="id33">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id33" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'(Show|Open) (the|) cart'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">({</span><span class="nv">command: </span><span class="s1">'navigate'</span><span class="p">,</span> <span class="nv">route: </span><span class="s1">'home'</span><span class="p">});</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'Opening the cart'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-send-data-from-the-app-to-the-dialog-script">
<span id="how-to-send-data-from-the-app-to-the-voice-script"></span><h3><span class="hidden">How to send data from the app to the dialog script</span><a class="headerlink" href="#how-to-send-data-from-the-app-to-the-dialog-script" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to send data from the app to the dialog script<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">To pass data from the app to the dialog script, you can use the <a class="reference internal" href="../../server-api/sending-data/project-api/"><span class="doc">project API functionality</span></a>. Do the following:</p>
<ol class="arabic simple">
<li><p class="card-text">Define a project API method in your dialog script.</p></li>
<li><p class="card-text"><a class="reference internal" href="../../client-api/methods/common-api/#callprojectapi"><span class="std std-ref">Call the defined method</span></a> from your app using Alan AI’s <code class="docutils literal notranslate"><span class="pre">callProjectApi()</span></code>. When calling the project API method, provide the method name and a JSON object with the data you want to send.</p></li>
</ol>
<p class="card-text">Let’s assume we want to pass the user’s name to the dialog script and greet the user when the user logs in to the system. To do this, we will define the <code class="docutils literal notranslate"><span class="pre">greetUser()</span></code> project API method in the dialog script:</p>
<div class="literal-block-wrapper docutils container" id="id34">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id34" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="nv">projectAPI.greetUser = </span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">param</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">param</span><span class="p">)</span> <span class="p">{</span>
        <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Nice to see you again, </span><span class="si">${</span><span class="nx">param</span><span class="p">.</span><span class="nx">user</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'Welcome to our app'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">callback</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<p class="card-text">In the app, we will call the <code class="docutils literal notranslate"><span class="pre">greetUser()</span></code> method when the <code class="docutils literal notranslate"><span class="pre">Log</span> <span class="pre">in</span></code> button is clicked and send the user’s name with it. Now, when the user logs in to the system, the Alan AI button will be activated automatically; Alan AI will send the user’s name to the dialog script and play: <code class="docutils literal notranslate"><span class="pre">Nice</span> <span class="pre">to</span> <span class="pre">see</span> <span class="pre">you</span> <span class="pre">again,</span> <span class="pre">John</span> <span class="pre">Smith</span></code> or <code class="docutils literal notranslate"><span class="pre">Welcome</span> <span class="pre">to</span> <span class="pre">our</span> <span class="pre">app</span></code>, if no name is provided.</p>
<div class="tabbed-set docutils">
<input checked="checked" id="7897c23f-9160-4029-a587-5e3ea074d9e5" name="c2c029fd-cc42-4cf0-aed7-7741e504a1c3" type="radio"/>
<label class="tabbed-label" for="7897c23f-9160-4029-a587-5e3ea074d9e5">
Web (React, Angular, etc.)</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id35">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id35" title="Permalink to this code">¶</a></div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calling the project API method on button click</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">sendData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alanBtnInstance</span><span class="p">.</span><span class="nx">activate</span><span class="p">();</span>
<span class="w">  </span><span class="nx">alanBtnInstance</span><span class="p">.</span><span class="nx">callProjectApi</span><span class="p">(</span><span class="s2">"greetUser"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="s1">'John Smith'</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{});</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<input id="95929078-db5c-4d78-8983-17b738951e8c" name="c2c029fd-cc42-4cf0-aed7-7741e504a1c3" type="radio"/>
<label class="tabbed-label" for="95929078-db5c-4d78-8983-17b738951e8c">
Objective-C</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id36">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id36" title="Permalink to this code">¶</a></div>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calling the project API method on button click</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callProjectApi</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">button</span><span class="w"> </span><span class="n">callProjectApi</span><span class="o">:</span><span class="s">@"script::greetUser"</span><span class="w"> </span><span class="n">withData</span><span class="o">:</span><span class="l">@{</span><span class="s">@"user"</span><span class="o">:</span><span class="s">@"John Smith"</span><span class="l">}</span><span class="w"> </span><span class="n">callback</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="e09795af-5c53-4fe6-aeb2-5a661f346272" name="c2c029fd-cc42-4cf0-aed7-7741e504a1c3" type="radio"/>
<label class="tabbed-label" for="e09795af-5c53-4fe6-aeb2-5a661f346272">
Swift</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id37">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id37" title="Permalink to this code">¶</a></div>
<div class="highlight-swift notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calling the project API method on button click</span>
<span class="kd">func</span> <span class="nf">callProjectApi</span><span class="p">()</span> <span class="p">{</span>
  <span class="kc">self</span><span class="p">.</span><span class="n">button</span><span class="p">.</span><span class="n">callProjectApi</span><span class="p">(</span><span class="s">"script::greetUser"</span><span class="p">,</span> <span class="n">withData</span><span class="p">:</span> <span class="p">[</span><span class="s">"user"</span><span class="p">:</span><span class="s">"John Smith"</span><span class="p">],</span> <span class="n">callback</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="3bad7999-097b-4326-bd49-ad8e473e511f" name="c2c029fd-cc42-4cf0-aed7-7741e504a1c3" type="radio"/>
<label class="tabbed-label" for="3bad7999-097b-4326-bd49-ad8e473e511f">
Kotlin</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id38">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id38" title="Permalink to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calling the project API method on button click</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">callProjectApi</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">()</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">params</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">"user"</span><span class="p">,</span><span class="w"> </span><span class="s">"John Smith"</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">JSONException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">message</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">alanButton</span><span class="o">?.</span><span class="na">callProjectApi</span><span class="p">(</span><span class="s">"script::greetUser"</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="baa9c912-41e4-4666-90cb-79edfc4e3306" name="c2c029fd-cc42-4cf0-aed7-7741e504a1c3" type="radio"/>
<label class="tabbed-label" for="baa9c912-41e4-4666-90cb-79edfc4e3306">
Java</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id39">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id39" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calling the project API method on button click</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">callProjectApi</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">();</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">params</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">"user"</span><span class="p">,</span><span class="s">"John Smith"</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">JSONException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">alanButton</span><span class="p">.</span><span class="na">callProjectApi</span><span class="p">(</span><span class="s">"script::greetUser"</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="a6381b1f-24b1-4aed-8189-5c99eb81a086" name="c2c029fd-cc42-4cf0-aed7-7741e504a1c3" type="radio"/>
<label class="tabbed-label" for="a6381b1f-24b1-4aed-8189-5c99eb81a086">
Flutter</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id40">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id40" title="Permalink to this code">¶</a></div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">_MyHomePageState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Calling the project API method on button click</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">_callProjectApi</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jsonEncode</span><span class="p">({</span><span class="s2">"user"</span><span class="o">:</span><span class="s2">"John Smith"</span><span class="p">});</span>
<span class="w">    </span><span class="n">AlanVoice</span><span class="p">.</span><span class="n">callProjectApi</span><span class="p">(</span><span class="s2">"script::greetUser"</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="2ea125f7-be72-414c-83f4-6e230c6ac32f" name="c2c029fd-cc42-4cf0-aed7-7741e504a1c3" type="radio"/>
<label class="tabbed-label" for="2ea125f7-be72-414c-83f4-6e230c6ac32f">
Ionic</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id41">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id41" title="Permalink to this code">¶</a></div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">myAlanBtn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'myAlanBtn'</span><span class="p">);</span>
<span class="nx">myAlanBtn</span><span class="p">.</span><span class="nx">componentOnReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Calling the project API method on button click</span>
<span class="w">  </span><span class="nx">myAlanBtn</span><span class="p">.</span><span class="nx">callProjectApi</span><span class="p">(</span><span class="s2">"greetUser"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="s2">"John Smith"</span><span class="p">},</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"project API function has been called"</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<input id="357804a3-a798-42b1-a42d-758f3a2ce213" name="c2c029fd-cc42-4cf0-aed7-7741e504a1c3" type="radio"/>
<label class="tabbed-label" for="357804a3-a798-42b1-a42d-758f3a2ce213">
React Native</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id42">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id42" title="Permalink to this code">¶</a></div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AlanView</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'@alan-ai/alan-sdk-react-native'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NativeEventEmitter</span><span class="p">,</span><span class="w"> </span><span class="nx">NativeModules</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'react-native'</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">AlanManager</span><span class="p">,</span><span class="w"> </span><span class="nx">AlanEventEmitter</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">NativeModules</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MyApp</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="c1">// Calling the project API method on button click</span>
<span class="w">  </span><span class="nx">onPress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span>
<span class="w">    </span><span class="nx">AlanManager</span><span class="p">.</span><span class="nx">activate</span><span class="p">();</span>
<span class="w">    </span><span class="nx">AlanManager</span><span class="p">.</span><span class="nx">callProjectApi</span><span class="p">(</span>
<span class="w">      </span><span class="s1">'greetUser'</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="s1">'John Smith'</span><span class="p">},</span>
<span class="w">      </span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-call-a-function-in-the-dialog-script-from-the-app">
<span id="how-to-call-a-function-in-the-voice-script-from-the-app"></span><h3><span class="hidden">How to call a function in the dialog script from the app</span><a class="headerlink" href="#how-to-call-a-function-in-the-dialog-script-from-the-app" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to call a function in the dialog script from the app<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you need to call a function from the app and perform some activities in the dialog script, you can use the <a class="reference internal" href="../../server-api/sending-data/project-api/"><span class="doc">project API functionality</span></a>. Do the following:</p>
<ol class="arabic simple">
<li><p class="card-text">Define a project API method in your dialog script.</p></li>
<li><p class="card-text"><a class="reference internal" href="../../client-api/methods/common-api/#callprojectapi"><span class="std std-ref">Call the defined method</span></a> from your app using Alan AI’s <code class="docutils literal notranslate"><span class="pre">callProjectApi()</span></code>.</p></li>
</ol>
<p class="card-text">Let’s assume we want the AI assistant to inform users about the closest stores available when they select a location in the app. To do this, we will define the <code class="docutils literal notranslate"><span class="pre">getStores()</span></code> method in the dialog script:</p>
<div class="literal-block-wrapper docutils container" id="id43">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id43" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="nv">projectAPI.getStores = </span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">param</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
  <span class="k k-Alan">p.</span><span class="nv">userData.stores = </span><span class="nx">param</span><span class="p">.</span><span class="nx">stores</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">param</span> <span class="o">&amp;&amp;</span> <span class="nx">param</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'We found several stores close to you...'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'There are no stores at the moment, please choose another location'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">callback</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<p class="card-text">In the app, we will call the <code class="docutils literal notranslate"><span class="pre">getStores()</span></code> method when a location is selected. The Alan AI button will be activated automatically; Alan AI will send the stores list to the dialog script, save it to the userData variable and play: We found several stores close to you… or There are no stores at the moment, please choose another location.</p>
<div class="tabbed-set docutils">
<input checked="checked" id="482c99ee-62da-424b-950e-8c700e28a503" name="d71fe84b-5e9e-4fea-8d1f-a759452ef5f1" type="radio"/>
<label class="tabbed-label" for="482c99ee-62da-424b-950e-8c700e28a503">
Web (React, Angular, etc.)</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id44">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id44" title="Permalink to this code">¶</a></div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calling the project API method on choosing a location</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">sendData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alanBtnInstance</span><span class="p">.</span><span class="nx">activate</span><span class="p">();</span>
<span class="w">  </span><span class="nx">alanBtnInstance</span><span class="p">.</span><span class="nx">callProjectApi</span><span class="p">(</span><span class="s2">"getStores"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">stores</span><span class="o">:</span><span class="w"> </span><span class="nx">storesList</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{});</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<input id="1751a791-c43b-4d34-91dc-828a2c0f3ce6" name="d71fe84b-5e9e-4fea-8d1f-a759452ef5f1" type="radio"/>
<label class="tabbed-label" for="1751a791-c43b-4d34-91dc-828a2c0f3ce6">
Objective-C</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id45">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id45" title="Permalink to this code">¶</a></div>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calling the project API method on choosing a location</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">callProjectApi</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">button</span><span class="w"> </span><span class="n">callProjectApi</span><span class="o">:</span><span class="s">@"script::getStores"</span><span class="w"> </span><span class="n">withData</span><span class="o">:</span><span class="l">@{</span><span class="s">@"stores"</span><span class="o">:</span><span class="s">@"storesList"</span><span class="l">}</span><span class="w"> </span><span class="n">callback</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="58808946-bf1e-4e8e-8d0d-f6de8305af7f" name="d71fe84b-5e9e-4fea-8d1f-a759452ef5f1" type="radio"/>
<label class="tabbed-label" for="58808946-bf1e-4e8e-8d0d-f6de8305af7f">
Swift</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id46">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id46" title="Permalink to this code">¶</a></div>
<div class="highlight-swift notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calling the project API method on choosing a location</span>
<span class="kd">func</span> <span class="nf">callProjectApi</span><span class="p">()</span> <span class="p">{</span>
  <span class="kc">self</span><span class="p">.</span><span class="n">button</span><span class="p">.</span><span class="n">callProjectApi</span><span class="p">(</span><span class="s">"script::getStores"</span><span class="p">,</span> <span class="n">withData</span><span class="p">:</span> <span class="p">[</span><span class="s">"stores"</span><span class="p">:</span><span class="s">"storesList"</span><span class="p">],</span> <span class="n">callback</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="0c3dbf92-2fd9-46ec-9be0-a3cd28bf0ff5" name="d71fe84b-5e9e-4fea-8d1f-a759452ef5f1" type="radio"/>
<label class="tabbed-label" for="0c3dbf92-2fd9-46ec-9be0-a3cd28bf0ff5">
Kotlin</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id47">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id47" title="Permalink to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calling the project API method on choosing a location</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">callProjectApi</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">()</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">params</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">"stores"</span><span class="p">,</span><span class="w"> </span><span class="s">"storesList"</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">JSONException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">message</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">alanButton</span><span class="o">?.</span><span class="na">callProjectApi</span><span class="p">(</span><span class="s">"script::getStores"</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="eaf00735-0db4-42c9-b0af-9a82c6ae7f5c" name="d71fe84b-5e9e-4fea-8d1f-a759452ef5f1" type="radio"/>
<label class="tabbed-label" for="eaf00735-0db4-42c9-b0af-9a82c6ae7f5c">
Java</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id48">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id48" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Calling the project API method on choosing a location</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">callProjectApi</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">();</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">params</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">"stores"</span><span class="p">,</span><span class="s">"storesList"</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">JSONException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">alanButton</span><span class="p">.</span><span class="na">callProjectApi</span><span class="p">(</span><span class="s">"script::getStores"</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="f29a0208-51c2-4c07-91d9-2069557b2315" name="d71fe84b-5e9e-4fea-8d1f-a759452ef5f1" type="radio"/>
<label class="tabbed-label" for="f29a0208-51c2-4c07-91d9-2069557b2315">
Flutter</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id49">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id49" title="Permalink to this code">¶</a></div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">_MyHomePageState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Calling the project API method on choosing a location</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">_callProjectApi</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jsonEncode</span><span class="p">({</span><span class="s2">"stores"</span><span class="o">:</span><span class="s2">"storesList"</span><span class="p">});</span>
<span class="w">    </span><span class="n">AlanVoice</span><span class="p">.</span><span class="n">callProjectApi</span><span class="p">(</span><span class="s2">"script::getStores"</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="84632ac8-f81b-41a7-a6c5-4cce5734954b" name="d71fe84b-5e9e-4fea-8d1f-a759452ef5f1" type="radio"/>
<label class="tabbed-label" for="84632ac8-f81b-41a7-a6c5-4cce5734954b">
Ionic</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id50">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id50" title="Permalink to this code">¶</a></div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">myAlanBtn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'myAlanBtn'</span><span class="p">);</span>
<span class="nx">myAlanBtn</span><span class="p">.</span><span class="nx">componentOnReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Calling the project API method on choosing a location</span>
<span class="w">  </span><span class="nx">myAlanBtn</span><span class="p">.</span><span class="nx">callProjectApi</span><span class="p">(</span><span class="s2">"getStores"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">stores</span><span class="o">:</span><span class="w"> </span><span class="kt">storesList</span><span class="p">},</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"project API function has been called"</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<input id="8b1395a4-973f-440a-a1b1-7008f82bba74" name="d71fe84b-5e9e-4fea-8d1f-a759452ef5f1" type="radio"/>
<label class="tabbed-label" for="8b1395a4-973f-440a-a1b1-7008f82bba74">
React Native</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id51">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id51" title="Permalink to this code">¶</a></div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AlanView</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'@alan-ai/alan-sdk-react-native'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NativeEventEmitter</span><span class="p">,</span><span class="w"> </span><span class="nx">NativeModules</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'react-native'</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">AlanManager</span><span class="p">,</span><span class="w"> </span><span class="nx">AlanEventEmitter</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">NativeModules</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MyApp</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="c1">// Calling the project API method on choosing a location</span>
<span class="w">  </span><span class="nx">onPress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span>
<span class="w">    </span><span class="nx">AlanManager</span><span class="p">.</span><span class="nx">activate</span><span class="p">();</span>
<span class="w">    </span><span class="nx">AlanManager</span><span class="p">.</span><span class="nx">callProjectApi</span><span class="p">(</span>
<span class="w">      </span><span class="s1">'getStores'</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span><span class="nx">stores</span><span class="o">:</span><span class="w"> </span><span class="kt">storesList</span><span class="p">},</span>
<span class="w">      </span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-send-information-about-the-app-visual-context-to-the-dialog-script">
<span id="how-to-send-information-about-the-app-visual-context-to-the-voice-script"></span><h3><span class="hidden">How to send information about the app visual context to the dialog script</span><a class="headerlink" href="#how-to-send-information-about-the-app-visual-context-to-the-dialog-script" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to send information about the app visual context to the dialog script<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">To build a contextual AI assistant, you should be able to provide Alan AI with information about the app’s visual context: what screen is currently open, what options are enabled at the moment and so on. To do this, you can use the <a class="reference internal" href="../../server-api/sending-data/visual-state/"><span class="doc">visual state functionality</span></a>. Do the following:</p>
<ol class="arabic simple">
<li><p class="card-text">Use the <a class="reference internal" href="../../client-api/methods/common-api/#setvisualstate"><span class="std std-ref">setVisualState() method</span></a> in the app to send the information about the current visual context to the dialog script.</p></li>
<li><p class="card-text">In the dialog script, differentiate responses using the <a class="reference internal" href="../../server-api/objects/#visual"><span class="std std-ref">visual</span></a> object.</p></li>
</ol>
<p class="card-text">Let’s assume we want to provide users with a possibility to ask about available functions and want the AI assistant to respond differently depending on the screen open. To do this, we need to send the visual state from the app like this:</p>
<div class="tabbed-set docutils">
<input checked="checked" id="10860958-e811-46ea-bf35-b8d1b52ecced" name="cbd0cb44-9356-40ed-ade1-dd151d18a9dd" type="radio"/>
<label class="tabbed-label" for="10860958-e811-46ea-bf35-b8d1b52ecced">
Web (React, Angular, etc.)</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id52">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id52" title="Permalink to this code">¶</a></div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">alanBtnInstance</span><span class="p">.</span><span class="nx">setVisualState</span><span class="p">({</span><span class="nx">screen</span><span class="o">:</span><span class="s2">"main"</span><span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<input id="aa4eb44e-86f7-4f88-94cd-703423ab4512" name="cbd0cb44-9356-40ed-ade1-dd151d18a9dd" type="radio"/>
<label class="tabbed-label" for="aa4eb44e-86f7-4f88-94cd-703423ab4512">
Objective-C</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id53">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id53" title="Permalink to this code">¶</a></div>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setVisualState</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">button</span><span class="w"> </span><span class="n">setVisualState</span><span class="o">:</span><span class="l">@{</span><span class="s">@"screen"</span><span class="o">:</span><span class="s">@"main"</span><span class="l">}</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="18251d31-46d0-4f0b-8473-1224254aee1c" name="cbd0cb44-9356-40ed-ade1-dd151d18a9dd" type="radio"/>
<label class="tabbed-label" for="18251d31-46d0-4f0b-8473-1224254aee1c">
Swift</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id54">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id54" title="Permalink to this code">¶</a></div>
<div class="highlight-swift notranslate"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nf">setVisualState</span><span class="p">()</span> <span class="p">{</span>
  <span class="kc">self</span><span class="p">.</span><span class="n">button</span><span class="p">.</span><span class="n">setVisualState</span><span class="p">([</span><span class="s">"screen"</span><span class="p">:</span><span class="s">"main"</span><span class="p">])</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="604e5f7c-78d5-45bb-a92e-e5eadf838011" name="cbd0cb44-9356-40ed-ade1-dd151d18a9dd" type="radio"/>
<label class="tabbed-label" for="604e5f7c-78d5-45bb-a92e-e5eadf838011">
Kotlin</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id55">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id55" title="Permalink to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">fun</span><span class="w"> </span><span class="nf">setVisualState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">()</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">params</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">"screen"</span><span class="p">,</span><span class="w"> </span><span class="s">"main"</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">JSONException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">e</span><span class="p">.</span><span class="na">message</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="nb">it</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">alanButton</span><span class="o">?.</span><span class="na">setVisualState</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="95d7a6e4-a805-42bf-bb95-d72f07e295b3" name="cbd0cb44-9356-40ed-ade1-dd151d18a9dd" type="radio"/>
<label class="tabbed-label" for="95d7a6e4-a805-42bf-bb95-d72f07e295b3">
Java</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id56">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id56" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">setVisualState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">();</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">params</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">"screen"</span><span class="p">,</span><span class="s">"main"</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">JSONException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">alanButton</span><span class="p">.</span><span class="na">setVisualState</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="784542a4-8fa5-4547-be47-51f762d25772" name="cbd0cb44-9356-40ed-ade1-dd151d18a9dd" type="radio"/>
<label class="tabbed-label" for="784542a4-8fa5-4547-be47-51f762d25772">
Flutter</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id57">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id57" title="Permalink to this code">¶</a></div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">_MyHomePageState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">_setVisualState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="n">visualState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jsonEncode</span><span class="p">({</span><span class="s2">"screen"</span><span class="o">:</span><span class="s2">"main"</span><span class="p">});</span>
<span class="w">    </span><span class="n">AlanVoice</span><span class="p">.</span><span class="n">setVisualState</span><span class="p">(</span><span class="n">visualState</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="67daa4bb-28fd-4fc6-a0ea-16ee87f2904b" name="cbd0cb44-9356-40ed-ade1-dd151d18a9dd" type="radio"/>
<label class="tabbed-label" for="67daa4bb-28fd-4fc6-a0ea-16ee87f2904b">
Ionic</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id58">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id58" title="Permalink to this code">¶</a></div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">myAlanBtn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'myAlanBtn'</span><span class="p">);</span>

<span class="nx">myAlanBtn</span><span class="p">.</span><span class="nx">componentOnReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">myAlanBtn</span><span class="p">.</span><span class="nx">setVisualState</span><span class="p">({</span><span class="nx">screen</span><span class="o">:</span><span class="w"> </span><span class="s1">'main'</span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<input id="46437b94-dfbf-4b03-902e-63c82e94b1fa" name="cbd0cb44-9356-40ed-ade1-dd151d18a9dd" type="radio"/>
<label class="tabbed-label" for="46437b94-dfbf-4b03-902e-63c82e94b1fa">
React Native</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id59">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id59" title="Permalink to this code">¶</a></div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">setVisualState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">AlanManager</span><span class="p">.</span><span class="nx">setVisualState</span><span class="p">({</span><span class="nx">screen</span><span class="o">:</span><span class="s2">"main"</span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<p class="card-text">In the dialog script, you can differentiate responses by accessing the <code class="docutils literal notranslate"><span class="pre">p.visual</span></code> runtime variable:</p>
<div class="literal-block-wrapper docutils container" id="id60">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id60" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s2">"What can I do here?"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">screen = </span><span class="k k-Alan">p.</span><span class="kp">visual</span><span class="p">.</span><span class="nx">screen</span><span class="p">;</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nx">screen</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s2">"main"</span><span class="o">:</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"You can browse our catalog and choose products"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">"checkout"</span><span class="o">:</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"Click Proceed to check out or Back to continue shopping"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"(Sorry,|) I have no information about it"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-filter-commands-in-the-script">
<h3><span class="hidden">How to filter commands in the script</span><a class="headerlink" href="#how-to-filter-commands-in-the-script" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to filter commands in the script<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If some of the voice and text commands should work only in specific circumstances: when a screen is open or options are enabled, you can send the visual state from the app to Alan AI as described in the how-to above and filter commands in the dialog script like this:</p>
<div class="literal-block-wrapper docutils container" id="id61">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id61" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nv">vCheckoutScreen = </span><span class="kp">visual</span><span class="p">({</span><span class="s2">"screen"</span><span class="o">:</span> <span class="s2">"checkout"</span><span class="p">});</span>

<span class="kp">intent</span><span class="p">(</span><span class="nx">vCheckoutScreen</span><span class="p">,</span> <span class="s1">'How do I check out?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'Check the products added to the cart and click Proceed'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-activate-the-alan-ai-button-programmatically-and-play-a-greeting">
<span id="how-to-activate-the-alan-button-programmatically-and-play-a-greeting"></span><h3><span class="hidden">How to activate the Alan AI button programmatically and play a greeting</span><a class="headerlink" href="#how-to-activate-the-alan-ai-button-programmatically-and-play-a-greeting" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to activate the Alan AI button programmatically and play a greeting<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">You can activate the Alan AI button programmatically, for example, if you want to greet the user or let the AI assistant start the dialog. To do this, use the <a class="reference internal" href="../../client-api/methods/state-handler/"><span class="doc">onButtonState handler</span></a> to check the Alan AI button state and the <a class="reference internal" href="../../client-api/methods/common-api/#activate"><span class="std std-ref">activate()</span></a> and <a class="reference internal" href="../../client-api/methods/common-api/#playtext"><span class="std std-ref">playText()</span></a> client API methods.</p>
<p class="card-text">In the example below, when the Alan AI button state is ONLINE (the connection to the Alan AI Studio project is established but the Alan AI button is not yet activated), the Alan AI button is activated programmatically and the assistant greets the user.</p>
<div class="tabbed-set docutils">
<input checked="checked" id="a1b19e0f-5cf6-4492-8d40-6e1b367f48ad" name="a665222e-384e-4469-b964-132232fef6f4" type="radio"/>
<label class="tabbed-label" for="a1b19e0f-5cf6-4492-8d40-6e1b367f48ad">
Web (React, Angular, etc.)</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id62">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id62" title="Permalink to this code">¶</a></div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">greetingWasSaid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">alanBtnInstance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">alanBtn</span><span class="p">({</span>
<span class="w">  </span><span class="p">...</span>
<span class="w">  </span><span class="nx">onButtonState</span><span class="o">:</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'ONLINE'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">greetingWasSaid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="nx">alanBtnInstance</span><span class="p">.</span><span class="nx">activate</span><span class="p">();</span>
<span class="w">        </span><span class="nx">alanBtnInstance</span><span class="p">.</span><span class="nx">playText</span><span class="p">(</span><span class="s2">"Hello! I'm Alan. How can I help you?"</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">greetingWasSaid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">rootEl</span><span class="o">:</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"alan-btn"</span><span class="p">),</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<input id="80430576-cb4a-42b9-8e1c-4939b3dd0169" name="a665222e-384e-4469-b964-132232fef6f4" type="radio"/>
<label class="tabbed-label" for="80430576-cb4a-42b9-8e1c-4939b3dd0169">
Swift</label><div class="tabbed-content docutils">
<p class="card-text">See the <a class="reference internal" href="../ios/greeting-swift/"><span class="doc">Playing a greeting in an iOS Swift app tutorial</span></a>.</p>
</div>
<input id="c8fa913a-ddc9-4737-825f-6a3544eedb42" name="a665222e-384e-4469-b964-132232fef6f4" type="radio"/>
<label class="tabbed-label" for="c8fa913a-ddc9-4737-825f-6a3544eedb42">
Flutter</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id63">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id63" title="Permalink to this code">¶</a></div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nc">_MyHomePageState</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">State</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">_greetingIsPlayed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>

<span class="w">  </span><span class="n">_MyHomePageState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">AlanVoice</span><span class="p">.</span><span class="n">addButton</span><span class="p">(</span><span class="s2">"ec973ec04ff2bac6faceb579449bc5142e956eca572e1d8b807a3e2338fdd0dc/stage"</span><span class="p">);</span>
<span class="w">    </span><span class="n">AlanVoice</span><span class="p">.</span><span class="n">onButtonState</span><span class="p">.</span><span class="n">add</span><span class="p">((</span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"ONLINE"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">_greetingIsPlayed</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">_greetingIsPlayed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="n">AlanVoice</span><span class="p">.</span><span class="n">activate</span><span class="p">();</span>
<span class="w">        </span><span class="n">AlanVoice</span><span class="p">.</span><span class="n">playText</span><span class="p">(</span><span class="s2">"Hello! I'm Alan. How can I help you?"</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="dee78605-b4cb-4ed5-a643-60473e57f42f" name="a665222e-384e-4469-b964-132232fef6f4" type="radio"/>
<label class="tabbed-label" for="dee78605-b4cb-4ed5-a643-60473e57f42f">
Ionic</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id64">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id64" title="Permalink to this code">¶</a></div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">private</span><span class="w"> </span><span class="nx">greetingWasSaid</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AppComponent</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">ngAfterViewInit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">alanBtnComponent</span><span class="p">.</span><span class="nx">nativeElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'buttonState'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">buttonState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span><span class="nx">CustomEvent</span><span class="o">&gt;</span><span class="nx">data</span><span class="p">).</span><span class="nx">detail</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">buttonState</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'ONLINE'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">greetingWasSaid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">this</span><span class="p">.</span><span class="nx">greetUserForFirstTime</span><span class="p">();</span>
<span class="w">          </span><span class="k">this</span><span class="p">.</span><span class="nx">greetingWasSaid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">greetUserForFirstTime</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">alanBtnComponent</span><span class="p">.</span><span class="nx">nativeElement</span><span class="p">.</span><span class="nx">componentOnReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">alanBtnComponent</span><span class="p">.</span><span class="nx">nativeElement</span><span class="p">.</span><span class="nx">activate</span><span class="p">();</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">alanBtnComponent</span><span class="p">.</span><span class="nx">nativeElement</span><span class="p">.</span><span class="nx">playText</span><span class="p">(</span><span class="s2">"Hello! I'm Alan. How can I help you?"</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">'DEBUG'</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-capture-user-utterances-as-text">
<span id="id4"></span><h3><span class="hidden">How to capture user utterances as text</span><a class="headerlink" href="#how-to-capture-user-utterances-as-text" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to capture user utterances as text<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">To capture what the user has said as a text message, use <a class="reference internal" href="../../client-api/methods/event-handler/"><span class="doc">Alan AI’s onEvent handler</span></a>.</p>
<p class="card-text">In the example below, different types of events are handled to write text messages of the user’s input and Alan AI’s response to the app logs:</p>
<ul class="simple">
<li><p class="card-text"><code class="docutils literal notranslate"><span class="pre">recognized</span></code> event to log interim results for the user’s utterance</p></li>
<li><p class="card-text"><code class="docutils literal notranslate"><span class="pre">parsed</span></code> event  to log the final variant of the user’s utterance, as Alan AI has parsed it</p></li>
<li><p class="card-text"><code class="docutils literal notranslate"><span class="pre">text</span></code> event to log the AI assistant response</p></li>
</ul>
<div class="tabbed-set docutils">
<input checked="checked" id="99a06d62-f4f5-486e-8976-f7bfa871fb99" name="efe86003-4883-43ca-a67c-32f1231135d2" type="radio"/>
<label class="tabbed-label" for="99a06d62-f4f5-486e-8976-f7bfa871fb99">
Web (React, Angular, etc.)</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id65">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id65" title="Permalink to this code">¶</a></div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">alanBtnInstance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">alanBtn</span><span class="p">({</span>
<span class="w">  </span><span class="c1">// Handling events</span>
<span class="w">  </span><span class="nx">onEvent</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"recognized"</span><span class="o">:</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">'Interim results:'</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"parsed"</span><span class="o">:</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">'Final result:'</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"text"</span><span class="o">:</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">'Alan AI reponse:'</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="k">default</span><span class="o">:</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">'Unknown event'</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<input id="02c6ba1d-09cf-4563-9a6f-2d5dd7bca9ae" name="efe86003-4883-43ca-a67c-32f1231135d2" type="radio"/>
<label class="tabbed-label" for="02c6ba1d-09cf-4563-9a6f-2d5dd7bca9ae">
Kotlin</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id66">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id66" title="Permalink to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">alanCallback</span><span class="p">:</span><span class="w"> </span><span class="n">AlanCallback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">AlanCallback</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">/// Handling events</span>
<span class="w">  </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onEvent</span><span class="p">(</span><span class="n">payload</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">eventName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">(</span><span class="n">payload</span><span class="p">).</span><span class="na">getString</span><span class="p">(</span><span class="s">"name"</span><span class="p">)</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">eventText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">(</span><span class="n">payload</span><span class="p">).</span><span class="na">getString</span><span class="p">(</span><span class="s">"text"</span><span class="p">)</span>
<span class="w">      </span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="n">eventName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">"recognized"</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Interim results: </span><span class="si">$</span><span class="n">eventText</span><span class="s">"</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="s">"parsed"</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Final result: </span><span class="si">$</span><span class="n">eventText</span><span class="s">"</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="s">"text"</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Alan AI response: </span><span class="si">$</span><span class="n">eventText</span><span class="s">"</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">JSONException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">e</span><span class="p">.</span><span class="na">message</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="nb">it</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w"> </span><span class="p">};</span>

<span class="c1">/// Registering callback</span>
<span class="n">alanButton</span><span class="o">?.</span><span class="na">registerCallback</span><span class="p">(</span><span class="n">alanCallback</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<input id="f277007f-2973-4ccd-9846-0c6fb5c6d058" name="efe86003-4883-43ca-a67c-32f1231135d2" type="radio"/>
<label class="tabbed-label" for="f277007f-2973-4ccd-9846-0c6fb5c6d058">
Java</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id67">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id67" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">AlanCallback</span><span class="w"> </span><span class="n">alanCallback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AlanCallback</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">/// Handling events</span>
<span class="w">  </span><span class="nd">@Override</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onEvent</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">payload</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">eventDict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">(</span><span class="n">payload</span><span class="p">);</span>
<span class="w">      </span><span class="n">String</span><span class="w"> </span><span class="n">eventName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eventDict</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">"name"</span><span class="p">);</span>
<span class="w">      </span><span class="n">String</span><span class="w"> </span><span class="n">eventText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eventDict</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">"text"</span><span class="p">);</span>
<span class="w">      </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">eventName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s">"recognized"</span><span class="p">:</span>
<span class="w">          </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Interim results: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">eventText</span><span class="p">);</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s">"parsed"</span><span class="p">:</span>
<span class="w">          </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Final result: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">eventText</span><span class="p">);</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s">"text"</span><span class="p">:</span>
<span class="w">          </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Alan AI's response: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">eventText</span><span class="p">);</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">default</span><span class="p">:</span>
<span class="w">          </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Unknown event"</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">JSONException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>

<span class="c1">/// Registering callbacks</span>
<span class="n">alanButton</span><span class="p">.</span><span class="na">registerCallback</span><span class="p">(</span><span class="n">alanCallback</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<input id="7a4273ed-7800-4456-bc92-ac3c768cd6a5" name="efe86003-4883-43ca-a67c-32f1231135d2" type="radio"/>
<label class="tabbed-label" for="7a4273ed-7800-4456-bc92-ac3c768cd6a5">
Flutter</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id68">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id68" title="Permalink to this code">¶</a></div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">_MyHomePageState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="c1">/// Registering the event listener</span>
<span class="w">  </span><span class="n">AlanVoice</span><span class="p">.</span><span class="n">onEvent</span><span class="p">.</span><span class="n">add</span><span class="p">((</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">_handleEvent</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">data</span><span class="p">));</span>
<span class="w">  </span><span class="c1">/// Handling events</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">_handleEvent</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">dynamic</span><span class="o">&gt;</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s2">"name"</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"recognized"</span><span class="o">:</span>
<span class="w">        </span><span class="n">debugPrint</span><span class="p">(</span><span class="s2">"Interim results: </span><span class="si">${</span><span class="n">event</span><span class="p">[</span><span class="s2">"text"</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"parsed"</span><span class="o">:</span>
<span class="w">        </span><span class="n">debugPrint</span><span class="p">(</span><span class="s2">"Final result: </span><span class="si">${</span><span class="n">event</span><span class="p">[</span><span class="s2">"text"</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"text"</span><span class="o">:</span>
<span class="w">        </span><span class="n">debugPrint</span><span class="p">(</span><span class="s2">"Alan AI's response: </span><span class="si">${</span><span class="n">event</span><span class="p">[</span><span class="s2">"text"</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="k">default</span><span class="o">:</span>
<span class="w">        </span><span class="n">debugPrint</span><span class="p">(</span><span class="s2">"Unknown event"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="1bfc7088-ff14-4f09-864c-b4bba1a5d533" name="efe86003-4883-43ca-a67c-32f1231135d2" type="radio"/>
<label class="tabbed-label" for="1bfc7088-ff14-4f09-864c-b4bba1a5d533">
Ionic</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id69">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id69" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ngAfterViewInit</span><span class="p">()</span> <span class="p">{</span>
  <span class="o">///</span> <span class="n">Registering</span> <span class="n">the</span> <span class="n">event</span> <span class="n">listener</span>
  <span class="n">this</span><span class="o">.</span><span class="n">alanBtnComponent</span><span class="o">.</span><span class="n">nativeElement</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'event'</span><span class="p">,</span> <span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="n">const</span> <span class="n">event</span> <span class="o">=</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">CustomEvent</span><span class="o">&gt;</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">detail</span><span class="p">;</span>
    <span class="o">///</span> <span class="n">Handling</span> <span class="n">events</span>
    <span class="n">switch</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s2">"recognized"</span><span class="p">:</span>
        <span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Interim results:'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s2">"parsed"</span><span class="p">:</span>
        <span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Final result:'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s2">"text"</span><span class="p">:</span>
        <span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Alan AI'</span><span class="n">s</span> <span class="n">reponse</span><span class="p">:</span><span class="s1">', event.text);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="n">default</span><span class="p">:</span>
        <span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Unknown event'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="da639f6b-230a-4c13-83de-6f0eae6e34f3" name="efe86003-4883-43ca-a67c-32f1231135d2" type="radio"/>
<label class="tabbed-label" for="da639f6b-230a-4c13-83de-6f0eae6e34f3">
React Native</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id70">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id70" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alanEventEmitter</span><span class="o">.</span><span class="n">addListener</span><span class="p">(</span><span class="s1">'onEvent'</span><span class="p">,</span> <span class="p">(</span><span class="n">payload</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="n">let</span> <span class="n">eventObj</span> <span class="o">=</span> <span class="n">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">payload</span><span class="p">);</span>
  <span class="n">switch</span> <span class="p">(</span><span class="n">eventObj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="s2">"recognized"</span><span class="p">:</span>
      <span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Interim results:'</span><span class="p">,</span> <span class="n">eventObj</span><span class="o">.</span><span class="n">text</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="s2">"parsed"</span><span class="p">:</span>
      <span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Final result:'</span><span class="p">,</span> <span class="n">eventObj</span><span class="o">.</span><span class="n">text</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="s2">"text"</span><span class="p">:</span>
      <span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Alan AI'</span><span class="n">s</span> <span class="n">reponse</span><span class="p">:</span><span class="s1">', eventObj.text);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="n">default</span><span class="p">:</span>
      <span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Unknown event'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</details></div>
<div class="section" id="how-to-send-text-messages-to-alan-ai">
<span id="how-to-send-text-messages-to-alan"></span><h3><span class="hidden">How to send text messages to Alan AI</span><a class="headerlink" href="#how-to-send-text-messages-to-alan-ai" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to send text messages to Alan AI<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">To send the user’s request to Alan AI as a text message, use the <a class="reference internal" href="../../client-api/methods/common-api/#sendtext"><span class="std std-ref">sendText()</span></a> method. To capture the AI assistant response to the sent message, use the <a class="reference internal" href="../../client-api/methods/event-handler/"><span class="doc">onEvent handler</span></a> and the <code class="docutils literal notranslate"><span class="pre">text</span></code> event.</p>
<p class="card-text">In the example below, when a button is clicked, the <code class="docutils literal notranslate"><span class="pre">How</span> <span class="pre">can</span> <span class="pre">you</span> <span class="pre">help</span> <span class="pre">me?</span></code> text message is sent to Alan AI. The assistant replies with the response defined in the dialog script. The user’s input and the AI assistant response are captured with the help of <code class="docutils literal notranslate"><span class="pre">parsed</span></code> and``text`` events in the <code class="docutils literal notranslate"><span class="pre">onEvent</span></code> handler and logged to the console.</p>
<div class="tabbed-set docutils">
<input checked="checked" id="3067ba8b-d8af-4d0a-8ab6-5c7aa1c73155" name="91243c72-3e86-4251-bc46-0b0ae817116b" type="radio"/>
<label class="tabbed-label" for="3067ba8b-d8af-4d0a-8ab6-5c7aa1c73155">
Web (React, Angular, etc.)</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id71">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id71" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'How can you help me?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'I can do virtually anything. Ask me a question or say what to do'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id72">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id72" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">"alan-btn"</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">button</span> <span class="nb">type</span><span class="o">=</span><span class="s2">"button"</span> <span class="n">onclick</span><span class="o">=</span><span class="s2">"sendText()"</span><span class="o">&gt;</span><span class="n">Send</span> <span class="n">text</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>
<span class="n">var</span> <span class="n">alanBtnInstance</span> <span class="o">=</span> <span class="n">alanBtn</span><span class="p">({</span>
  <span class="n">key</span><span class="p">:</span> <span class="s2">"YOUR_KEY_FROM_ALAN_STUDIO_HERE"</span><span class="p">,</span>
  <span class="n">onEvent</span><span class="p">:</span> <span class="n">function</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">name</span> <span class="o">===</span> <span class="s2">"parsed"</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Sent msg:'</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">text</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">name</span> <span class="o">===</span> <span class="s2">"text"</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Received msg:'</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">text</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="n">rootEl</span><span class="p">:</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"alan-btn"</span><span class="p">),</span>
<span class="p">});</span>

<span class="n">function</span> <span class="n">sendText</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">alanBtnInstance</span><span class="o">.</span><span class="n">sendText</span><span class="p">(</span><span class="s1">'How can you help me?'</span><span class="p">);</span>
<span class="p">}</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
<input id="a8086559-41d6-4702-bda5-248817d87ea6" name="91243c72-3e86-4251-bc46-0b0ae817116b" type="radio"/>
<label class="tabbed-label" for="a8086559-41d6-4702-bda5-248817d87ea6">
Objective-C</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id73">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id73" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'How can you help me?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'I can do virtually anything. Ask me a question or say what to do'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id74">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id74" title="Permalink to this code">¶</a></div>
<div class="highlight-obj-c notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">sendText</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">button</span><span class="w"> </span><span class="n">sendText</span><span class="o">:</span><span class="s">@"How can you help me?"</span><span class="p">];</span>
<span class="p">}</span>

<span class="nb">self</span><span class="p">.</span><span class="n">button</span><span class="p">.</span><span class="n">onEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span><span class="w"> </span><span class="o">*</span><span class="n">payload</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="bp">NSData</span><span class="o">*</span><span class="w"> </span><span class="n">eventData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">payload</span><span class="w"> </span><span class="n">dataUsingEncoding</span><span class="o">:</span><span class="n">NSUTF8StringEncoding</span><span class="p">];</span>
<span class="w">  </span><span class="bp">NSError</span><span class="o">*</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">nil</span><span class="p">;</span>
<span class="w">  </span><span class="bp">NSDictionary</span><span class="o">*</span><span class="w"> </span><span class="n">eventDict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSJSONSerialization</span><span class="w"> </span><span class="n">JSONObjectWithData</span><span class="o">:</span><span class="n">eventData</span><span class="w"> </span><span class="n">options</span><span class="o">:</span><span class="mi">0</span><span class="w"> </span><span class="n">error</span><span class="o">:&amp;</span><span class="n">error</span><span class="p">];</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">nil</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span><span class="w"> </span><span class="n">eventDict</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<input id="345d1054-f66a-42fe-aa92-15b3b7bfbf37" name="91243c72-3e86-4251-bc46-0b0ae817116b" type="radio"/>
<label class="tabbed-label" for="345d1054-f66a-42fe-aa92-15b3b7bfbf37">
Swift</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id75">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id75" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'How can you help me?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'I can do virtually anything. Ask me a question or say what to do'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id76">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id76" title="Permalink to this code">¶</a></div>
<div class="highlight-swift notranslate"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nf">sendText</span><span class="p">()</span> <span class="p">{</span>
  <span class="kc">self</span><span class="p">.</span><span class="n">button</span><span class="p">.</span><span class="n">sendText</span><span class="p">(</span><span class="s">"How can you help me?"</span><span class="p">)</span>
<span class="p">}</span>

<span class="kc">self</span><span class="p">.</span><span class="n">button</span><span class="p">.</span><span class="n">onEvent</span> <span class="p">=</span> <span class="p">{</span> <span class="n">event</span> <span class="k">in</span>
  <span class="k">guard</span> <span class="kd">let</span> <span class="nv">eventData</span> <span class="p">=</span> <span class="n">event</span><span class="p">?.</span><span class="n">data</span><span class="p">(</span><span class="n">using</span><span class="p">:</span> <span class="p">.</span><span class="n">utf8</span><span class="p">,</span> <span class="n">allowLossyConversion</span><span class="p">:</span> <span class="kc">false</span><span class="p">),</span>
    <span class="kd">let</span> <span class="nv">eventDict</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">JSONSerialization</span><span class="p">.</span><span class="n">jsonObject</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">eventData</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="p">.</span><span class="n">mutableContainers</span><span class="p">)</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span>
  <span class="p">}</span>
  <span class="bp">print</span><span class="p">(</span><span class="n">eventDict</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="da0f4711-a0c7-4d32-ae28-258c2a05a500" name="91243c72-3e86-4251-bc46-0b0ae817116b" type="radio"/>
<label class="tabbed-label" for="da0f4711-a0c7-4d32-ae28-258c2a05a500">
Kotlin</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id77">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id77" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'How can you help me?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'I can do virtually anything. Ask me a question or say what to do'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id78">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id78" title="Permalink to this code">¶</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">fun</span><span class="w"> </span><span class="nf">sendText</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">alanButton</span><span class="o">?.</span><span class="na">sendText</span><span class="p">(</span><span class="s">"How can you help me?"</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">alanCallback</span><span class="p">:</span><span class="w"> </span><span class="n">AlanCallback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">AlanCallback</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onEvent</span><span class="p">(</span><span class="n">payload</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="kd">val</span><span class="w"> </span><span class="nv">eventName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">(</span><span class="n">payload</span><span class="p">).</span><span class="na">getString</span><span class="p">(</span><span class="s">"name"</span><span class="p">)</span>
<span class="w">       </span><span class="kd">val</span><span class="w"> </span><span class="nv">eventText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">(</span><span class="n">payload</span><span class="p">).</span><span class="na">getString</span><span class="p">(</span><span class="s">"text"</span><span class="p">)</span>
<span class="w">       </span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="n">eventName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="s">"parsed"</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Sent msg: </span><span class="si">$</span><span class="n">eventText</span><span class="s">"</span><span class="p">)</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">         </span><span class="s">"text"</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Received msg: </span><span class="si">$</span><span class="n">eventText</span><span class="s">"</span><span class="p">)</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">       </span><span class="p">}</span>
<span class="w">     </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">JSONException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">e</span><span class="p">.</span><span class="na">message</span><span class="o">?.</span><span class="na">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="nb">it</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
<span class="n">alanButton</span><span class="o">?.</span><span class="na">registerCallback</span><span class="p">(</span><span class="n">alanCallback</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<input id="3e25b089-7339-452e-b523-958df2595647" name="91243c72-3e86-4251-bc46-0b0ae817116b" type="radio"/>
<label class="tabbed-label" for="3e25b089-7339-452e-b523-958df2595647">
Java</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id79">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id79" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'How can you help me?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'I can do virtually anything. Ask me a question or say what to do'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id80">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id80" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">sendText</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">alanButton</span><span class="p">.</span><span class="na">sendText</span><span class="p">(</span><span class="s">"How can you help me?"</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">AlanCallback</span><span class="w"> </span><span class="n">alanCallback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AlanCallback</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nd">@Override</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">onEvent</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">payload</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">eventDict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JSONObject</span><span class="p">(</span><span class="n">payload</span><span class="p">);</span>
<span class="w">       </span><span class="n">String</span><span class="w"> </span><span class="n">eventName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eventDict</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">"name"</span><span class="p">);</span>
<span class="w">       </span><span class="n">String</span><span class="w"> </span><span class="n">eventText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eventDict</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">"text"</span><span class="p">);</span>
<span class="w">       </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">eventName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="k">case</span><span class="w"> </span><span class="s">"parsed"</span><span class="p">:</span>
<span class="w">           </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Sent msg: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">eventText</span><span class="p">);</span>
<span class="w">           </span><span class="k">break</span><span class="p">;</span>
<span class="w">         </span><span class="k">case</span><span class="w"> </span><span class="s">"text"</span><span class="p">:</span>
<span class="w">           </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Received msg: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">eventText</span><span class="p">);</span>
<span class="w">           </span><span class="k">break</span><span class="p">;</span>
<span class="w">         </span><span class="k">default</span><span class="p">:</span>
<span class="w">           </span><span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="s">"Unknown event"</span><span class="p">);</span>
<span class="w">       </span><span class="p">}</span>
<span class="w">     </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">JSONException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">Log</span><span class="p">.</span><span class="na">e</span><span class="p">(</span><span class="s">"AlanButton"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>
<span class="n">alanButton</span><span class="p">.</span><span class="na">registerCallback</span><span class="p">(</span><span class="n">alanCallback</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<input id="54537b86-c8c9-4655-8dc8-3aecb117c6e3" name="91243c72-3e86-4251-bc46-0b0ae817116b" type="radio"/>
<label class="tabbed-label" for="54537b86-c8c9-4655-8dc8-3aecb117c6e3">
Flutter</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id81">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id81" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'How can you help me?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'I can do virtually anything. Ask me a question or say what to do'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id82">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id82" title="Permalink to this code">¶</a></div>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">_MyHomePageState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">_sendText</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">AlanVoice</span><span class="p">.</span><span class="n">sendText</span><span class="p">(</span><span class="s2">"How can you help me?"</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">   </span><span class="n">AlanVoice</span><span class="p">.</span><span class="n">onEvent</span><span class="p">.</span><span class="n">add</span><span class="p">((</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">_handleEvent</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">data</span><span class="p">));</span>

<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">_handleEvent</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">dynamic</span><span class="o">&gt;</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s2">"name"</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"parsed"</span><span class="o">:</span>
<span class="w">        </span><span class="n">debugPrint</span><span class="p">(</span><span class="s2">"Sent msg: </span><span class="si">${</span><span class="n">event</span><span class="p">[</span><span class="s2">"text"</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"text"</span><span class="o">:</span>
<span class="w">        </span><span class="n">debugPrint</span><span class="p">(</span><span class="s2">"Received msg: </span><span class="si">${</span><span class="n">event</span><span class="p">[</span><span class="s2">"text"</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="k">default</span><span class="o">:</span>
<span class="w">        </span><span class="n">debugPrint</span><span class="p">(</span><span class="s2">"Unknown event"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="844a6bde-dbe4-4ccf-a595-6d69ab3c1871" name="91243c72-3e86-4251-bc46-0b0ae817116b" type="radio"/>
<label class="tabbed-label" for="844a6bde-dbe4-4ccf-a595-6d69ab3c1871">
Ionic</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id83">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id83" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'How can you help me?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'I can do virtually anything. Ask me a question or say what to do'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id84">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id84" title="Permalink to this code">¶</a></div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">myAlanBtn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'myAlanBtn'</span><span class="p">);</span>

<span class="nx">myAlanBtn</span><span class="p">.</span><span class="nx">componentOnReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">myAlanBtn</span><span class="p">.</span><span class="nx">sendText</span><span class="p">(</span><span class="s2">"How can you help me?"</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">ngAfterViewInit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">alanBtnComponent</span><span class="p">.</span><span class="nx">nativeElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'event'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span><span class="nx">CustomEvent</span><span class="o">&gt;</span><span class="nx">data</span><span class="p">).</span><span class="nx">detail</span><span class="p">;</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"parsed"</span><span class="o">:</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">'Sent msg:'</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"text"</span><span class="o">:</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">'Received msg:'</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="nx">default</span><span class="o">:</span>
<span class="w">        </span><span class="kt">console.info</span><span class="p">(</span><span class="s1">'Unknown event'</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<input id="ff95c434-cf75-4a69-bf34-08c2307eb6b5" name="91243c72-3e86-4251-bc46-0b0ae817116b" type="radio"/>
<label class="tabbed-label" for="ff95c434-cf75-4a69-bf34-08c2307eb6b5">
React Native</label><div class="tabbed-content docutils">
<div class="literal-block-wrapper docutils container" id="id85">
<div class="code-block-caption"><span class="caption-text">Dialog script</span><a class="headerlink" href="#id85" title="Permalink to this code">¶</a></div>
<div class="highlight-alan notranslate"><div class="highlight"><pre><span></span><span class="kp">intent</span><span class="p">(</span><span class="s1">'How can you help me?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k k-Alan">p.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'I can do virtually anything. Ask me a question or say what to do'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id86">
<div class="code-block-caption"><span class="caption-text">Client app</span><a class="headerlink" href="#id86" title="Permalink to this code">¶</a></div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">sendText</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">AlanManager</span><span class="p">.</span><span class="nx">sendText</span><span class="p">(</span><span class="s2">"How can you help me?"</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">componentDidMount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alanEventEmitter</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s1">'onEvent'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">eventObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">payload</span><span class="p">);</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">eventObj</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"parsed"</span><span class="o">:</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">'Sent msg:'</span><span class="p">,</span><span class="w"> </span><span class="nx">eventObj</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s2">"text"</span><span class="o">:</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">'Received msg:'</span><span class="p">,</span><span class="w"> </span><span class="nx">eventObj</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="nx">default</span><span class="o">:</span>
<span class="w">        </span><span class="kt">console.info</span><span class="p">(</span><span class="s1">'Unknown event'</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>

<span class="nx">componentWillUnmount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">alanEventEmitter</span><span class="p">.</span><span class="nx">removeAllListeners</span><span class="p">(</span><span class="s1">'onEvent'</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</details></div>
</div>
</div>

      </article>
	  <div class="alan-btn"></div>
	  <script>
		function isLocalStorageAvailable() {
            var result;

            try {
                localStorage.setItem('test', 1);
                localStorage.getItem('test');
                localStorage.removeItem('test');
                result = true;
            } catch (e) {
                result = false;
            }
            return result;
        }

        function getProjectId() {
            var key = 'beae1a6e1f7e512c4d0bf347580da6fd2e956eca572e1d8b807a3e2338fdd0dc/prod';
            if (key) {
                return key.substr(0, key.indexOf('/'));
            }

            return null;
        }

        console.info("Alan Lib is laoded.");
        window.alanBtnInstance = window.alanBtn({
            key: 'beae1a6e1f7e512c4d0bf347580da6fd2e956eca572e1d8b807a3e2338fdd0dc/prod',
            zIndex: 999999,
            onCommand: function (commandData) {

                if (commandData && commandData.command === 'openURL') {
                    if (commandData.target === '_blank'){
                        window.open(commandData.url,'_newtab' + Math.floor(Math.random()*999999));
                    } else {
                        window.location.href = commandData.url;
                    }

                }
            },
            onConnectionStatus: function (status) {
                if (status === 'authorized') {
                    window.alanBtnInstance.setVisualState({ page: window.location.pathname, url: window.location.href });
                    if(isLocalStorageAvailable()){
                        if(!localStorage.getItem('alan-btn-session-'+ getProjectId())) {
                            localStorage.setItem('alan-btn-session-'+ getProjectId(), 1)
                            window.alanBtnInstance.callProjectApi("sendGreetingMessage");
                        }
                    }
                }
            },
        });
	  </script>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../list-all/">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Alan AI tutorials</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../../client-api/methods/event-handler/">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">onEvent handler</div>
                
              </div>
            </a>
        </div>
        
	  <div class="alan-footer">
	  <div class="footer-logo-and-social-icons">
		<div class="footer-logo-and-text">
		<a class="footer-logo" aria-label="Link to alan.app" href="https://alan.app/"></a>
		</div>
		
		<div class="footer-other">
		<div class="footer-social">
			<a href="https://twitter.com/alanvoiceai" target="_blank" class="fa-brands fa-twitter"></a>
			<a href="http://linkedin.com/company/alanvoiceai" target="_blank" class="fa-brands fa-linkedin"></a>
			<a href="https://www.facebook.com/alanvoiceai/" target="_blank" class="fa-brands fa-facebook"></a>
			<a href="https://www.instagram.com/alanvoiceai/" target="_blank" class="fa-brands fa-instagram"></a>
			<a href="https://www.youtube.com/channel/UCrsg0b32nL6L2j5jG7uxOuw" target="_blank" class="fa-brands fa-youtube"></a>
			<a href="https://alanaigroup.slack.com/join/shared_invite/enQtNzMzOTE5MTIwMjg4LWI4ZmM4MTNkMTdmY2M0ZWEwODlmZDQ5Y2ZkMjUzNmMyZDJiMzA0Y2M1NDdhYzZjYWFlZTA5NjM4OTU0MWFmNWU#/shared-invite/email" target="_blank" class="fa-brands fa-slack"></a>
			<a href="https://github.com/alan-ai" target="_blank" class="fa-brands fa-github"></a>
        </div>
		</div>
	  </div>
	  <div class="footer-badges">
	  <div class="footer-badges-info">
	  <div><span><sup>®</sup>2024 Alan AI, Inc. All rights reserved.</span></div>
	  </div>
	  
	  </div>
	  <div class="footer-badges-imgs">
	  <a class="footer_badges_imgs_app-store" href="https://apps.apple.com/ca/app/alan-playground/id1474478921"></a>
	  <a class="footer_badges_imgs_google-play" href="https://play.google.com/store/apps/details?id=app.alan.playground"></a>
	  </div>
	  
      </footer>
    </div>
	
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">How-Tos</a><ul>
<li><a class="reference internal" href="#dialog-script">Dialog script</a><ul>
<li><a class="reference internal" href="#how-to-capture-the-entire-user-input"><span class="hidden">How to capture the entire user input</span></a></li>
<li><a class="reference internal" href="#how-to-create-slots-with-item-names-from-arrays"><span class="hidden">How to create slots with item names from arrays</span></a></li>
<li><a class="reference internal" href="#how-to-run-a-query-with-words-from-the-user-input"><span class="hidden">How to run a query with words from the user input</span></a></li>
<li><a class="reference internal" href="#how-to-use-predefined-slots"><span class="hidden">How to use predefined slots</span></a></li>
<li><a class="reference internal" href="#how-to-get-the-right-answer-from-the-user"><span class="hidden">How to get the right answer from the user</span></a></li>
<li><a class="reference internal" href="#how-to-handle-unexpected-voice-or-text-commands-from-the-user"><span class="hidden">How to handle unexpected voice or text commands from the user</span></a></li>
<li><a class="reference internal" href="#how-to-allow-adding-comments-with-voice-and-text-commands"><span class="hidden">How to allow adding comments with voice and text commands</span></a></li>
<li><a class="reference internal" href="#how-to-iterate-over-a-list-of-objects-back-and-forward"><span class="hidden">How to iterate over a list of objects (back and forward)</span></a></li>
<li><a class="reference internal" href="#how-to-sort-items-by-price-name-or-category"><span class="hidden">How to sort items by price, name or category</span></a></li>
<li><a class="reference internal" href="#how-to-pass-information-to-the-context"><span class="hidden">How to pass information to the context</span></a></li>
<li><a class="reference internal" href="#how-to-use-voice-and-text-commands-with-fuzzy-parameters"><span class="hidden">How to use voice and text commands with fuzzy parameters</span></a></li>
<li><a class="reference internal" href="#how-to-use-several-slots-of-the-same-type-in-one-intent"><span class="hidden">How to use several slots of the same type in one intent</span></a></li>
<li><a class="reference internal" href="#how-to-make-alan-ai-use-the-plural-form-for-nouns"><span class="hidden">How to make Alan AI use the plural form for nouns</span></a></li>
<li><a class="reference internal" href="#how-to-allow-users-to-say-synonyms-for-the-same-thing"><span class="hidden">How to allow users to say synonyms for the same thing</span></a></li>
<li><a class="reference internal" href="#how-to-ask-the-user-clarifying-questions"><span class="hidden">How to ask the user clarifying questions</span></a></li>
<li><a class="reference internal" href="#how-to-indicate-meaningful-words-terms-and-names"><span class="hidden">How to indicate meaningful words, terms and names</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="#client-app">Client app</a><ul>
<li><a class="reference internal" href="#how-to-send-commands-to-the-app"><span class="hidden">How to send commands to the app</span></a></li>
<li><a class="reference internal" href="#how-to-send-data-from-the-dialog-script-to-the-app"><span class="hidden">How to send data from the dialog script to the app</span></a></li>
<li><a class="reference internal" href="#how-to-send-data-from-the-app-to-the-dialog-script"><span class="hidden">How to send data from the app to the dialog script</span></a></li>
<li><a class="reference internal" href="#how-to-call-a-function-in-the-dialog-script-from-the-app"><span class="hidden">How to call a function in the dialog script from the app</span></a></li>
<li><a class="reference internal" href="#how-to-send-information-about-the-app-visual-context-to-the-dialog-script"><span class="hidden">How to send information about the app visual context to the dialog script</span></a></li>
<li><a class="reference internal" href="#how-to-filter-commands-in-the-script"><span class="hidden">How to filter commands in the script</span></a></li>
<li><a class="reference internal" href="#how-to-activate-the-alan-ai-button-programmatically-and-play-a-greeting"><span class="hidden">How to activate the Alan AI button programmatically and play a greeting</span></a></li>
<li><a class="reference internal" href="#how-to-capture-user-utterances-as-text"><span class="hidden">How to capture user utterances as text</span></a></li>
<li><a class="reference internal" href="#how-to-send-text-messages-to-alan-ai"><span class="hidden">How to send text messages to Alan AI</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  
  </main>
</div>
</div>

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/custom.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/typesense-docsearch.js@latest/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../../_static/scripts/algolia.js"></script>
    <script defer="defer" src="../../_static/scripts/algolia-mobile.js"></script>
    <script src="../../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>