Ember
=====

.. raw:: html
   
   <a href="https://www.npmjs.com/package/@alan-ai/alan-sdk-web">
   <img src="https://img.shields.io/npm/v/@alan-ai/alan-sdk-web.svg" align="left" /></a>

   <a href="https://github.com/alan-ai/alan-sdk-web/releases">
   <img src="https://img.shields.io/github/v/release/alan-ai/alan-sdk-web" align="left"/></a>
   
   <br/>

Integrating with Alan AI
------------------------

To integrate an Ember app with Alan AI:

1. Install the ``@alan-ai/alan-sdk-web`` package:

   .. code-block:: 
      :caption: Terminal

      npm install @alan-ai/alan-sdk-web --save

2. Install the ``ember-auto-import`` package to have an ability to use packages from npm:

   .. code-block::
      :caption: Terminal

      npm install ember-auto-import --save

3. Add the following code to the ``app.js`` file in your project:

   .. code-block:: typescript
      :caption: Client app

      window.alanBtnInstance = alanBtn({ 
        key: 'YOUR_KEY_FROM_ALAN_STUDIO_HERE',
        onCommand: (commandData) => {
          if (commandData.command === 'go:back') {
            // Call the client code that will react to the received command
          }
        },
      });

.. note::
	  
   Mind the following:
   
   - Regularly update the ``@alan-ai/alan-sdk-web`` package your project depends on. To check if a newer version is available, run ``npm outdated``. To update the alan package, run ``npm update @alan-ai/alan-sdk-web``. For more details, see `npm documentation <https://docs.npmjs.com/updating-packages-downloaded-from-the-registry>`__.
   - For simplicity, in the examples provided in this section, we store the ``alanBtnInstance`` in the ``window`` variable. In your project, you can use any method that suits you best.
   


Specifying the Alan AI button parameters
----------------------------------------

.. include:: ../snippets/button-parameters-web.rst

Changing the Alan AI button position
------------------------------------

.. include:: ../snippets/button-position-web.rst

Using client API methods
------------------------

You can use the following :doc:`client API methods <../methods/common-api>` in your Ember app:

-  `setVisualState()`_
-  `callProjectApi()`_
-  `playText()`_
-  `sendText()`_
-  `playCommand()`_
-  `activate()`_
-  `deactivate()`_
-  `isActive()`_
-  `remove()`_
- `textChat.isAudioOutputEnabled()`_
- `textChat.setAudioOutputEnabled()`_

setVisualState()
~~~~~~~~~~~~~~~~

Use the ``setVisualState()`` method to inform the in-app assistant about the appâ€™s visual context. For details, see :ref:`setVisualState() <setVisualState()>`.

.. code-block:: javascript
   :caption: Client app
   
   window.alanBtnInstance.setVisualState({data:"your data"});
   
callProjectApi()
~~~~~~~~~~~~~~~~

Use the ``callProjectApi()`` method to send data from the client app to the dialog script and trigger activities without voice and text commands. For details, see :ref:`callProjectApi() <callProjectApi()>`.

.. code-block:: alan
   :caption: Dialog script

   projectAPI.setClientData = function(p, param, callback) {
     console.log(param);
   };

.. code-block:: javascript
   :caption: Client app
   
   window.alanBtnInstance.callProjectApi("setClientData", {value:"your data"}, function (error, result){
     // Handling error and result
   });
	  
   
playText()
~~~~~~~~~~

Use the ``playText()`` method to play specific text in the client app. For details, see :ref:`playText() <playText()>`.

.. code-block:: javascript
   :caption: Client app
   
   window.alanBtnInstance.playText("Hi! I am Alan");
   
sendText()
~~~~~~~~~~

Use the ``sendText()`` method to send a text message to Alan AI as the user's input. For details, see :ref:`sendText() <sendText()>`.

.. code-block:: javascript
   :caption: Client app
   
   window.alanBtnInstance.sendText("Hello Alan, can you help me?");

   
playCommand()
~~~~~~~~~~~~~

Use the ``playCommand()`` method to execute a specific command in the client app. For details, see :ref:`playCommand() <playCommand()>`.

.. code-block:: javascript
   :caption: Client app
   
   window.alanBtnInstance.playCommand({command: "goBack"});
   
   
activate()
~~~~~~~~~~

Use the ``activate()`` method to activate the Alan AI button programmatically. For details, see :ref:`activate() <activate()>`.

.. code-block:: javascript
   :caption: Client app
   
   window.alanBtnInstance.activate()
   
deactivate()
~~~~~~~~~~~~

Use the ``deactivate()`` method to deactivate the Alan AI button programmatically. For details, see :ref:`deactivate() <deactivate()>`.

.. code-block:: javascript
   :caption: Client app
   
   window.alanBtnInstance.deactivate()
   
isActive()
~~~~~~~~~~

Use the ``isActive()`` method to check the Alan AI button state: active or not. For details, see :ref:`isActive() <isActive()>`.

.. code-block:: javascript
   :caption: Client app
   
   window.alanBtnInstance.isActive()
   
   
remove()
~~~~~~~~

Use the ``remove()`` method to remove the Alan AI button from the parent element. For details, see :ref:`remove() <remove()>`.

.. code-block:: javascript
   :caption: Client app
   
   window.alanBtnInstance.remove()
   
textChat.isAudioOutputEnabled()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Use the ``textChat.isAudioOutputEnabled()`` method to get the state of audio output for the Alan AI Chat. For details, see :ref:`textChat.isAudioOutputEnabled() <textChat.isAudioOutputEnabled()>`.

.. include:: ../snippets/get-audio-web.rst

textChat.setAudioOutputEnabled()
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Use the ``textChat.setAudioOutputEnabled()`` method to enable or disable audio output for the Alan AI Chat. For details, see :ref:`textChat.setAudioOutputEnabled() <textChat.setAudioOutputEnabled()>`.

.. include:: ../snippets/set-audio-web.rst
   
   
Using handlers
--------------

You can use the following :doc:`Alan AI handlers <../methods/handlers>` in your Ember app:

-  `onCommand handler`_
-  `onButtonState handler`_
-  `onConnectionStatus handler`_
-  `onEvent handler`_

onCommand handler
~~~~~~~~~~~~~~~~~

Use the ``onCommand`` handler to :ref:`handle commands sent from the dialog script <Sending commands to the app>`. For details, see :doc:`onCommand handler <../methods/command-handler>`.

.. include:: ../snippets/command-handler-web.rst

onButtonState handler
~~~~~~~~~~~~~~~~~~~~~

Use the ``onButtonState`` handler to capture and handle the Alan AI button state changes. For details, see :doc:`onButtonState handler <../methods/state-handler>`.

.. include:: ../snippets/state-handler-web.rst

onConnectionStatus handler
~~~~~~~~~~~~~~~~~~~~~~~~~~

Use the ``onConnectionStatus`` handler to capture and handle the connection status for the virtual assistant project. For details, see :doc:`onConnectionStatus handler <../methods/connection-handler>`.

.. include:: ../snippets/connection-handler-web.rst

onEvent handler
~~~~~~~~~~~~~~~

Use the ``onEvent`` handler to capture and handle events emitted by Alan AI: get user's utterances, assistant responses and so on. For details, see :doc:`onEvent handler <../methods/event-handler>`.

.. include:: ../snippets/event-handler-web.rst


What's next?
------------

.. panels::
   :column: col-lg-12 col-md-12 col-sm-6 col-xs-12 p-2

   ---
   :card: border-0 + custom-style-res + git
   
   .. link-button:: https://github.com/alan-ai/alan-sdk-web/tree/master/examples/
      :type: url
      :text: 
      :classes: stretched-link panel
	  
   .. raw:: html
      
	  <p style="font-weight: 600">Example apps</p>
   
   Find and explore examples of AI assistants in Alan AI GitHub.

.. raw:: html

   <div id="purple-background"></div>
